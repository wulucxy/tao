{"version":3,"sources":["webpack:///./src/pages/aboard/index.js","webpack:///./src/pages/aboard/index.less","webpack:///./src/assets/components/beautifySelect/index.js","webpack:///./src/assets/components/beautifySelect/index.less"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,GAAE;AACF;;AAEA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,E;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,aAAa;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA,cAAa;AACb;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;;;;;;;;;;AChMA,0C;;;;;;;ACAA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA,QAAO;;AAEP;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;;AAEA;AACA,OAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,SAAQ;AACR;AACA;AACA;AACA,UAAS;AACT;;AAEA,OAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,GAAE;;;AAGF;AACA,oB;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,GAAE;AACF;AACA,G;;AAEA,iC;;;;;;;ACtGA,0C","file":"static/web/js/aboard.js","sourcesContent":["/* 建议这里都引入 */\nrequire('../../assets/less/common.less');\nrequire('./index.less');\nvar $ = window.$ || require(\"jquery\");\n\n//工具类方法\nvar util = require(\"../../assets/components/util\");\n\n//公共方法\nvar common = require(\"../../assets/components/common\");\n\n/* 具体实现 */\n// 验证组件\nrequire(\"../../assets/components/validator\");\n\n//selct组件\nvar beautifySelect = require(\"../../assets/components/beautifySelect\");\n\n//checkbox定制\n$('.label_radio').click(function(){\n  util.setupLabel();\n});\n\nutil.setupLabel();\n\n//切换顶部nav高亮\ncommon.switchNav(1);\n\nvar provinceId = $(\"[name=province]\").val();\n\nvar getStateUrl = preServer+\"getStateUrl\";\n\n\nvar aboard = {\n\n\trender : function(){\n\t\tvar that = this;\n\n\t\t//渲染城市列表\n\t\tif(this.state.stateList && this.state.stateList.length){\n\t\t\tvar optionList = [];\n\t\t\t$.each(this.state.stateList,function(idx,ele){\n\t\t\t\toptionList.push('<li name='+ele.name+' code='+ele.code+'>'+ele.name+'</li>');\n\t\t\t});\n\n\t\t\toptionList = optionList.join(\"\");\n\t\t\t$(\"#statesSelect .options\").empty().append(optionList);\n\t\t};\n\n\t\t//渲染选中城市信息\n\t\tif(that.state.selectedState && that.state.selectedState.name){\n\t\t\t$(\"#statesSelect .triggerTxt\").text(that.state.selectedState.name);\n\t\t}else{\n\t\t\t$(\"#statesSelect .triggerTxt\").text(\"请选择\");\n\t\t}\n\t},\n\tinit : function(){\n\n\t\tthis.state = {};\n\t\tthis.bindEvt();\n\n\t\tthis.formAction();\n\t},\n\n\tbindEvt : function(){\n\t\tvar that = this;\n\n\t\t//地区不可点\n\t\t$(\"#statesSelect .trigger\").addClass(\"disabled\");\n\n\t\tbeautifySelect($(\"#countrySelect\"),{\n\t\t\tselectCallback : function(li,index){\n\t\t\t\t$(\"[name=country]\").val($(li).attr(\"code\"));\n\t\t\t\t$(li).closest(\".row\").removeClass(\"error empty\");\n\t\t\t\tthat.getStateInfo($(li).attr(\"code\"));\n\t\t\t}\n\t\t});\t\n\n\t\tbeautifySelect($(\"#statesSelect\"),{\n\t\t\tselectCallback : function(li,index){\n\t\t\t\t$(li).closest(\".row\").removeClass(\"error empty\");\n\t\t\t\t$(\"[name=states_cn]\").val($(li).attr(\"code\"));\n\t\t\t}\n\t\t});\n\n\t\tbeautifySelect($(\"#exam_typeSelect\"),{\n\t\t\tselectCallback : function(li,index){\n\t\t\t\t$(li).closest(\".row\").removeClass(\"error empty\");\n\t\t\t\t$(\"[name=exam_type]\").val($(li).attr(\"code\"));\n\t\t\t}\n\t\t});\n\t},\n\n\tgetStateInfo : function(code){\n\t\tvar that = this;\n\t\t$.ajax({\n\t\t\turl : getStateUrl,\n            type : \"post\",\n            contentType: \"application/json\",\n            data : JSON.stringify({country:code}),\n            success : function(res){\n                if(typeof res ==\"string\"){\n                    var res = $.parseJSON(res);\n                }\n                \n                if(res.code){\n                \twarn(res.msg);\n                \t$(\"#statesSelect .trigger\").addClass(\"disabled\");\n                \treturn;\n                }\n\n                $(\"#statesSelect .trigger\").removeClass(\"disabled\");\n                \n                //选中城市列表\n                that.state.stateList = res.stateList;\n                //选中的城市\n                that.state.selectedState = {\n                \tcode : \"\",\n                \tname : \"\"\n                };\n\n                that.render();\n\n\n            },\n            error : function(err){\n                console.log($.parseJSON(err.responseText).msg);\n            }\n\t\t});\n\t},\n\n\tformAction : function(){\n\t\tvar that = this;\n\t\t$(\"#aboardForm\").validator({\n\t\t\terrorParent: '.row',\n\t\t    successCallback: function(e) {\n\t\t      var target = $(e.target).closest('.btn');\n\t\t      //执行到下一步操作\n\t\t      that.subFunc(target,$(\"#aboardForm\"));\n\n\t\t    },\n\t\t    focusinCallback: function() {\n\t\t      var _ele = $(this);\n\t\t      common.hideError($('.errTxt'));\n\t\t    },\n\n\t\t    errorCallback: function(unvalidFields) {\n\t\t      var oError = $('.errTxt');\n\t\t    }\n\t\t});\n\t},\n\n\tsubFunc : function(btn,oForm){\n\t\tvar that = this;\n\n\t\tvar _data = {\n\t\t\tuser_mobile\t: $(\"[name=mobile]\").val(),\n\t\t\tcountry\t: $(\"[name=country]\").val(),\n\t\t\tstates_cn : $(\"[name=states_cn]\").val(),\t\n\t\t\tdegree\t: $(\"[name=degree]\").val(),\n\t\t\tmajor_key : $(\"[name=major_key]\").val(),\n\t\t\texam_type : $(\"[name=exam_type]\").val(),\n\t\t\texam_score : $(\"[name=exam_score]\").val(),\n\t\t\tgpa_score : $(\"[name=gpa_score]\").val()\n\t\t};\n\n\t\n\t\t$.ajax({\n\t\t\turl : preServer+provinceId+\"/tzy/plan/abroad/create\",\n\t\t\tcontentType: \"application/json\",\n\t\t\ttype : \"post\",\n\t\t    data : JSON.stringify(_data),\n\t\t    success : function(res){\n\t\t      if(typeof res == \"string\"){\n\t\t        var res = $.parseJSON(res);\n\t\t      }\n\n\t\t      if(res.code!=1){\n\t\t        window.location = \"/box/plan/aboard_success\";\n\t\t        return false;\n\t\t      }else{\n\t\t        console.log(res);\n\t\t        return;\n\t\t      }\n\t\t    },\n\t\t    error : function(res){\n\t\t       console.log(res);\n\t\t    }\n\t\t})\n\t}\n};\n\naboard.init();\n\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/pages/aboard/index.js\n ** module id = 0\n ** module chunks = 0\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/pages/aboard/index.less\n ** module id = 34\n ** module chunks = 0\n **/","var $ = window.$ || require(\"jquery\");\nvar extend =  require('object-assign');\n\nrequire(\"./index.less\");\n\n\tfunction Plugin(t,o){\n\t\tthis.target=t;\n\t\tthis.settings=o;\n\t\tthis.trigger = this.target.find(o.trigger),\n\t\tthis.ul = this.target.find(\".options\");\n      \tthis.lists = this.ul.find(\"li\");\n\n\t\tthis.init(this.settings);\n\t}\n\n\tPlugin.prototype={\n\t\tinit : function(){\n\t\t\tthis.bindEvt();\n\t\t},\n\n\t\tbindEvt : function(){\n\t\t\tvar that = this,o = that.settings;\n\n\t\t\tthat.trigger.on(\"click\",function(){\n\t\t        if($(this).hasClass('disabled')) return;\n\t\t        that.toggle($(this));\n\t      \t});\n\n\t      \tthat.ul.on('mouseenter', 'li', function(e) {\n\t\t        $(this).addClass('current');\n\t\t    });\n\n\t\t    that.ul.on('mouseleave', 'li', function(e) {\n\t\t        $(this).removeClass('current');\n\t\t    });\n\n\t\t    that.ul.on('click','li',function(e){\n\t          var index = $(this).index();\n\t          if(!$(this).hasClass(\"disabled\")){\n\t            that.updateTriggerText(index);\n\t            $(this).siblings().removeClass('current');\n\t            $(this).addClass('current');\n\t            that.toggle();\n\t            o.selectCallback && o.selectCallback($(this),index);\n\t          }\n\t      \t});\n\t\t},\n\n\t\tupdateTriggerText : function(index){\n\t      var that = this;\n\t      if(typeof index=='undefined'){\n\t        that.trigger.find(\".triggerTxt\").text(\"未选择\");\n\t        that.trigger.addClass('disable');\n\t      }else{\n\t        that.trigger.find(\".triggerTxt\").text(that.lists.eq(index).text());\n\t      }\n\n\t      that.selectedIndex = index;\n\t    },\n\n\t\ttoggle : function(){\n\t      var that = this;\n\t      that.trigger.toggleClass('open');\n\t      if(!that.ul.hasClass(\"open\")){\n\t      \tthat.ul.show(50,function(){\n\t      \t\tthat.ul.addClass(\"open\");\n\t      \t});\n\t      }else{\n\t      \tthat.ul.removeClass(\"open\");\n\t      \tsetTimeout(function(){\n\t      \t\tthat.ul.hide();\n\t      \t},400)\n\t      }\n\t      \n\t    },\n\n\t    close : function(){\n\t      var that = this;\n\t      that.trigger.removeClass('open');\n\t      that.ul.removeClass('open');\n\t    }\n\t};\n\t\n\nvar beautifySelect = function(target,o) {\n\tvar instance = $.data( $(target), 'beautifySelect' );\n\tvar settings=extend({\n\t\t\"trigger\" : \"[data-toggle]\"\n\t},o);\n\n\t\n\t$(target).each(function(index) {\n\t\tvar me = $(this);  \n\t\tif ( instance ) {\n          instance.init();\n        }else {\n            instance = $.data( this, 'beautifySelect', new Plugin( me,settings ) );\n        }\n\t});\n\treturn instance;\n};\t\n\nmodule.exports = beautifySelect;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/assets/components/beautifySelect/index.js\n ** module id = 101\n ** module chunks = 0\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/assets/components/beautifySelect/index.less\n ** module id = 102\n ** module chunks = 0\n **/"],"sourceRoot":""}