webpackJsonp([10],{0:function(e,a,t){t(21),t(152);var l=(window.$||t(44),t(45),t(46));l.switchNav(2);var n=t(154);n.init()},152:function(e,a){},154:function(e,a,t){var l=window.$||t(44),n=(t(49),t(155)),s=t(156),i=t(45),o=l("[name=province]").val(),c={render:function(){var e=this;if(this.state.tagList.length){var a=l.map(e.state.tagList,function(e){var a=e.type+":"+e.value;return'<a class="tags" data-action="remove" href="javascript:;" data-value="'+a+'">'+e.text+'<span class="taoIcon btn-x"></span></a>'}),t=[];t.push('<a href="javascript:;" class="fr btn btn-default" data-action="clear">清空所有</a>'),t.push('<span class="cat-text fl">已选择：</span>'),t.push(a.join("")),l(".crumb").html(t.join(""))}else l(".crumb").html('<span class="cat-text fl">已选择：</span>');if(!l("input[name=city]").length){var n=[];n.push('<input type="hidden" name="city">'),n.push('<input type="hidden" name="level">'),n.push('<input type="hidden" name="feature">'),l(".crumb").append(n.join(""))}var s="0";l.each(e.state.tagList,function(e,a){l("[name="+a.type+"]").val(a.value||""),s+=l("[name="+a.type+"]").val()})},requestData:function(e){var a=this,t=(a.options,{province:Number(l("[name=city]").val()),capacity:a.capacity,level:l("[name=level]").val(),feature:[Number(l("[name=feature]").val())]});t.city+t.level+t.feature;e&&l(e).hasClass("btn-loading")?a.pager++:a.pager=1,t.page=a.pager,l.ajax({url:preServer+o+"/data/college",type:"post",contentType:"application/json",data:JSON.stringify(t),success:function(e){if("string"==typeof e)var e=l.parseJSON(e);return 1!=e.code?void warn(e.msg):(e=e.result,l.each(e.colleges,function(e,a){a.code=a.collegeId,a.name=a.collegeName,a.city={code:a.city,name:s.getCityName(a.city)},a.collegeType={code:a.collegeType,name:s.getCollegeTypeName(a.collegeType)},a.ownerType={code:a.ownerType,name:s.getOwnerTypeName(a.ownerType)},a.level={code:a.level,name:s.getLevelName(a.level)},a.feature=l.map(a.feature,function(e,a){return{type:e,name:s.getFeatureName(e)}})}),void a.loadList(e,a.pager))}})},loadList:function(e,a){var t=this,s=(t.options,n(e));1==a?l(".schoolList").empty().html(s):l(".schoolList").append(s),1==a&&0==e.total?l(".btn-loading").hide():(l(".btn-loading").show(),l(".btn-loading").removeClass("loading disabled"));var i=Math.ceil(e.total/t.capacity);a>=i?l(".btn-loading").addClass("loading-all"):l(".btn-loading").removeClass("loading-all")},updateUI:function(){this.render()},init:function(e){this.state={tagList:[]},this.options=e,this.capacity=10,this.pager=1,this.render(),this.bindEvt()},searchCollegeReq:function(e,a){var t=this,n=l("#collegeInput");l.ajax({url:preServer+o+"/data/college/search",type:"post",data:JSON.stringify({keyword:a||n.val(),page:t.pager}),contentType:"application/json",success:function(a){if("string"==typeof a)var a=l.parseJSON(a);return 1!=a.code?(warn(a.msg),void e.removeClass("disabled")):(a=a.result,l.each(a.colleges,function(e,a){a.code=a.collegeId,a.name=a.collegeName,a.city={code:a.city,name:s.getCityName(a.city)},a.collegeType={code:a.collegeType,name:s.getCollegeTypeName(a.collegeType)},a.ownerType={code:a.ownerType,name:s.getOwnerTypeName(a.ownerType)},a.level={code:a.level,name:s.getLevelName(a.level)},a.feature=l.map(a.feature,function(e,a){return{type:e,name:s.getFeatureName(e)}})}),e.removeClass("disabled"),t.loadList(a,t.pager),void t.pager++)},error:function(a){e.removeClass("disabled"),console.log(a)}})},bindEvt:function(){function e(e){e.preventDefault(),a.pager=1;var t=l("#collegeInput"),n=l(this).closest(".btn");return""==l.trim(t.val())?void warn("请输入院校名称"):(a.state.searchType=1,void(n.hasClass("disabled")||(n.addClass("disabled"),a.state.tagList=[],l(".itemLists .item").removeClass("current"),a.render(),a.searchCollegeReq(n))))}var a=this;l(document).on("click","[data-action=add]",function(e){e.preventDefault();var t=l(e.target);l("#collegeInput").val(""),a.state.searchType=0;var n=t.data("value").split(":")[0],s=t.data("value").split(":")[1];t.hasClass("current")||""==s||(t.closest(".row").find(".item").removeClass("current"),l.each(a.state.tagList,function(e,t){return n==t.type?(a.state.tagList.splice(e,1),!1):void 0}),t.addClass("current"),a.state.tagList.push({type:n,value:s,text:t.text()}),a.render(),a.requestData(t))}),l(document).on("click","[data-action=clear]",function(e){e.preventDefault(),a.state.searchType=0,l("#collegeInput").val(""),l("[data-action=add]").removeClass("current"),a.state.tagList=[],a.render(),a.requestData()}),l(document).on("click","[data-action=remove]",function(e){e.preventDefault(),l("#collegeInput").val(""),a.state.searchType=0;var t=l(e.target).closest(".tags"),n=t.data("value").split(":")[0],s=t.data("value").split(":")[1];l.each(a.state.tagList,function(e,t){if(n==t.type&&s==t.value){a.state.tagList.splice(e,1);var i='[data-value="'+n+":"+s+'"]';return l(i).removeClass("current"),!1}}),a.render(),a.requestData(t)}),l(".btn-loading").on("click",function(e){e.preventDefault();var t=l(this).closest(".btn");if(!t.hasClass("disabled")&&!t.hasClass("loading-all"))if(t.addClass("disabled loading"),1==a.state.searchType){var n=l("#collegeInput").val()||decodeURI(i.getQuery("keyword"));a.searchCollegeReq(l("#sBtn"),n)}else 0==a.state.searchType&&a.requestData(t)}),l("#sBtn").on("click",function(a){e(a)}),l("#collegeInput").on("keyup",function(a){return 13!=a.keyCode?!1:void e(a)}),i.getQuery("keyword")?(a.state.searchType=1,a.searchCollegeReq(l("#sBtn"),decodeURI(i.getQuery("keyword")))):(a.state.searchType=0,a.requestData())}};e.exports=c},155:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)if(0==colleges.length&&1==page)__p+='\n	<li class="no_transList"><i class="noListIcon"></i><em class="vm">暂无记录</em></li>\n';else{__p+="	\n";for(var i=0;i<colleges.length;i++){__p+='\n<li class="clearfix">\n	\n	<div class="fr">\n		<a href="/library/college/'+(null==(__t=colleges[i].collegeId)?"":__t)+'" target="_blank" class="btn btn-primary btn-mid">查看详情</a>\n	</div>\n	<div class="media">\n	<span class="fl imgWrap mr10 dib">\n		<img src="'+(null==(__t=colleges[i].logo)?"":__t)+'" class="responsive" />\n	</span>\n	<div className="media-body">\n		<h4 class="name badgeRow"><em class="badgetitle vm">'+(null==(__t=colleges[i].collegeName)?"":__t)+"</em>\n			";for(var j=0;j<colleges[i].feature.length;j++)__p+="\n				",__p+=1==colleges[i].feature[j].type?'\n					<span class="badge green">'+(null==(__t=colleges[i].feature[j].name)?"":__t)+"</span>\n				":2==colleges[i].feature[j].type?'\n					<span class="badge red">'+(null==(__t=colleges[i].feature[j].name)?"":__t)+"</span>\n				":'\n					<span class="badge">'+(null==(__t=colleges[i].feature[j].name)?"":__t)+"</span>\n				",__p+="\n			";__p+='\n		</h4>\n		<div class="detail">\n			<span class="label">院校属地：</span><span class="field">'+(null==(__t=colleges[i].city.name)?"":__t)+'</span>\n			<span class="label">院校分类：</span><span class="field">'+(null==(__t=colleges[i].collegeType.name)?"":__t)+'</span>\n			<span class="label">院校性质：</span><span class="field">'+(null==(__t=colleges[i].ownerType.name)?"":__t)+'</span>\n			<span class="label">院校层次：</span><span class="field">'+(null==(__t=colleges[i].level.name)?"":__t)+"</span>\n		</div>\n	</div>\n	</div>\n</li>\n"}}return __p}}});