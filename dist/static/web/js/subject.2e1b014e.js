webpackJsonp([54],{0:function(t,a,e){e(23),e(338);var s=(window.$||e(46),e(47),e(48));s.switchNav(2);var n=e(340);n.init()},338:function(t,a){},340:function(t,a,e){var s=window.$||e(46),n=(e(51),e(341)),l=e(135),i=e(342),o=e(343),r=e(194),c=e(47),p=s("[name=province]").val(),u={render:function(){var t=this;if(this.state.tagList.length){var a=s.map(t.state.tagList,function(t){var a=t.type+":"+t.value;return s("[subject="+t.value+"]").addClass("current"),'<a class="tags" data-action="remove" href="javascript:;" data-value="'+a+'">'+t.text+'<span class="taoIcon btn-x"></span></a>'}),e=[];e.push('<a href="javascript:;" class="fr btn btn-default" data-action="clear">清空所有</a>'),e.push('<span class="cat-text fl">已选择：</span>'),e.push('<span class="tagsWrap">'+a.join("")+"</span>"),s(".crumb").html(e.join(""))}else s(".crumb").html('<span class="cat-text fl">已选择：</span>');if(!s("input[name=subjectList]").length){var n=[];n.push('<input type="hidden" name="subjectList">'),s(".m-nav").append(n.join(""))}},requestData:function(t){var a=this,e=(a.options,s.map(a.state.tagList,function(t){return Number(t.value)}));e.length||e.push(0);var n={capacity:a.capacity,subjectList:e};t?a.pager++:a.pager=1,n.page=a.pager,s.ajax({url:preServer+p+"/data/subject/search",type:"post",contentType:"application/json",data:JSON.stringify(n),success:function(t){if("string"==typeof t)var t=s.parseJSON(t);return 1!=t.code?void warn(t.msg):(t=t.result,s.each(t.colleges,function(t,a){a.code=a.collegeId,a.name=a.collegeName,a.city={code:a.city,name:l.getCityName(a.city)},a.collegeType={code:a.collegeType,name:l.getCollegeTypeName(a.collegeType)},a.ownerType={code:a.ownerType,name:l.getOwnerTypeName(a.ownerType)},a.level={code:a.level,name:l.getLevelName(a.level)},a.feature=s.map(a.feature,function(t,a){return{type:t,name:l.getFeatureName(t)}})}),void a.loadList(t,a.pager))}})},loadList:function(t,a){var e=this,l=(e.options,n(t));1==a?s(".schoolList").empty().html(l):s(".schoolList").append(l),s(".btn-loading").removeClass("loading disabled");var i=Math.ceil(t.total/e.capacity);a>=i?s(".btn-loading").addClass("loading-all"):s(".btn-loading").removeClass("loading-all")},updateUI:function(){this.render()},init:function(t){var a=this;if(this.state={tagList:[]},this.options=t,this.capacity=10,this.pager=1,this.len=6,this.bindEvt(),c.getQuery("keys")){var e=s(".itemLists .item").map(function(t,a){return{type:s(a).data("value").split(":")[0],value:s(a).data("value").split(":")[1],text:s(a).text()}}),n=c.getQuery("keys").split("");s.each(n,function(t,n){s.each(e,function(t,e){if(n==e.value)return a.state.tagList.push({type:e.type,value:e.value,text:e.text}),!1})}),this.updateUI(),this.requestData()}else this.updateUI(),this.requestData()},bindEvt:function(){var t=this;s(document).on("click","[data-action=add]",function(a){a.preventDefault();var e=s(a.target),n=e.data("value").split(":")[0],l=e.data("value").split(":")[1];e.hasClass("current")||""==l||(t.state.tagList.push({type:n,value:l,text:e.text()}),t.updateUI(),t.requestData())}),s(document).on("click","[data-action=clear]",function(a){a.preventDefault(),s("[data-action=add]").removeClass("current"),t.state.tagList=[],t.updateUI(),t.requestData()}),s(document).on("click","[data-action=remove]",function(a){a.preventDefault();var e=s(a.target).closest(".tags"),n=e.data("value").split(":")[0],l=e.data("value").split(":")[1];s.each(t.state.tagList,function(a,e){if(n==e.type&&l==e.value){t.state.tagList.splice(a,1);var i='[data-value="'+n+":"+l+'"]';return s(i).removeClass("current"),!1}}),t.updateUI(),t.requestData()}),s(".btn-loading").on("click",function(a){a.preventDefault();var e=s(this).closest(".btn");e.hasClass("disabled")||e.hasClass("loading-all")||(e.addClass("disabled loading"),t.requestData(e))}),s(document).on("click",".favMajorBtn",function(a){a.preventDefault();var e=s(a.target).closest(".btn");return!e.hasClass("disabled")&&(e.addClass("disabled"),void t.reqCollegeInfo(e))})},pagination:function(t,a){var e=this,s=Math.ceil(a.majors.length/6);r(t,{pages:s,displayedPages:3,currentPage:1,edges:1,onPageClick:function(t){e.requestItemList(t)}})},requestItemList:function(t){var a=this;a.majorRes.subMajors=a.majorRes.majors.slice((t-1)*a.len,t*a.len),a.pager++,a.renderList(a.majorRes)},renderList:function(t){s(".majorList").empty().append(o(t))},majorBox:function(t,a){var e=this;modalBox(t,{html:i(a),klass:"w540 shadow",closeByOverlay:!1,startCallback:function(){if(e.pager=1,e.requestItemList(e.pager),!s(".majorListWrap").find(".pagination").length){s(".majorListWrap").append('<div class="pagination"></div>');var t=s(".majorListWrap").find(".pagination");e.pagination(t,a)}},completeCallback:function(){},closeCallback:function(){t.removeClass("disabled")}})},reqCollegeInfo:function(t){var a=this,e=s.map(a.state.tagList,function(t){return Number(t.value)});s.ajax({url:preServer+p+"/data/subject/"+t.attr("collegeid"),type:"post",data:JSON.stringify({subjects:e}),success:function(e){if("string"==typeof e)var e=s.parseJSON(e);return 1!=e.code?(warn(e.msg),!1):(a.majorRes=e.result,void a.majorBox(t,a.majorRes))}})}};t.exports=u},341:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)if(0==colleges.length&&1==page)__p+='\n\t<li class="no_transList"><i class="noListIcon"></i><em class="vm">暂无记录</em></li>\n';else{__p+="\t\n";for(var i=0;i<colleges.length;i++){__p+='\n<li class="clearfix">\n\t<div class="fl">\n\t<h4 class="name badgeRow"><em class="badgetitle vm">'+(null==(__t=colleges[i].collegeName)?"":__t)+"</em>\n\t\t";for(var j=0;j<colleges[i].feature.length;j++)__p+="\n\t\t\t",__p+=1==colleges[i].feature[j].type?'\n\t\t\t\t<span class="badge green">'+(null==(__t=colleges[i].feature[j].name)?"":__t)+"</span>\n\t\t\t":2==colleges[i].feature[j].type?'\n\t\t\t\t<span class="badge red">'+(null==(__t=colleges[i].feature[j].name)?"":__t)+"</span>\n\t\t\t":'\n\t\t\t\t<span class="badge">'+(null==(__t=colleges[i].feature[j].name)?"":__t)+"</span>\n\t\t\t",__p+="\n\t\t";__p+='\n\t</h4>\n\t<div class="detail">\n\t\t<span class="label">院校属地：</span><span class="field">'+(null==(__t=colleges[i].city.name)?"":__t)+'</span>\n\t\t<span class="label">院校分类：</span><span class="field">'+(null==(__t=colleges[i].collegeType.name)?"":__t)+'</span>\n\t\t<span class="label">院校性质：</span><span class="field">'+(null==(__t=colleges[i].ownerType.name)?"":__t)+'</span>\n\t\t<span class="label">院校层次：</span><span class="field">'+(null==(__t=colleges[i].level.name)?"":__t)+'</span>\n\t</div>\n\t</div>\n\t<div class="fr">\n\t\t<a href="javascript:;" class="btn btn-primary btn-mid favMajorBtn" collegeid='+(null==(__t=colleges[i].collegeId)?"":__t)+" >"+(null==(__t=colleges[i].majorCount)?"":__t)+"个专业</a>\n\t</div>\n</li>\n"}}return __p}},342:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="modalCntWrap g9 favMajorModal">\n <h3 class="clearfix">\n <a href="javascript:;" class="icons btn-close fr"></a>\n <span class="fl">'+(null==(__t=collegeName)?"":__t)+'</span>\n</h3>\n\n<div class="majorListWrap">\n  <div class="majorList">\n  \t\n  </div>\n</div>\n\n</div>';return __p}},343:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)for(var i=0;i<subMajors.length;i++){if(__p+='\n  <div class="row clearfix"> \n  \t<span class="col1 fl">\n\t  \t<a target="_blank" href="/library/major/'+(null==(__t=subMajors[i].majorId)?"":__t)+'" title="'+(null==(__t=subMajors[i].majorName)?"":__t)+'">\n\t  \t\t'+(null==(__t=subMajors[i].majorName)?"":__t)+':\n\t  \t</a>\n  \t</span>\n  \t<div class="col2 fl">\n      ',0==subMajors[i].subjects.length||7==subMajors[i].subjects.length)__p+='\n        <span class="btn btn-default">不限</span>\n      ';else{__p+="\n  \t\t";for(var k=0;k<subMajors[i].subjects.length;k++)__p+='\n  \t\t<span class="btn btn-default">'+(null==(__t=subMajors[i].subjects[k].subjectName)?"":__t)+"</span>\n  \t\t"}__p+="\n  \t</div>\n  </div>\n"}return __p}}});