webpackJsonp([8],{0:function(t,e,a){a(21),a(145);var n=window.$||a(44),r=a(45),s=(a(46),a(148)),i=a(149),o=a(135),l=a(136),c=a(53),u=a(107),d=n("[name=province]").val(),p=(n("[name=batch]").val(),n("[name=userId]").val()),_=(c.isModernBrower,{init:function(){this.detailTrigger(),this.requestData()},detailTrigger:function(){n("[data-trigger]").on("click",function(t){t.preventDefault();var e=n(t.target).closest(".trigger"),a="detail"==e.data("trigger")?o:l;modalBox(e.get(0),{html:a(),klass:"w540 shadow",closeByOverlay:!1,completeCallback:function(){}})})},travelMajorList:function(t,e){n.each(e,function(e,a){"-1"!=t.indexOf(a.categoryId)&&(a.status=1)})},requestData:function(){var t=this;n.ajax({url:preServer+d+"/data/major/categoryList",type:"get",success:function(e){if("string"==typeof rs)var e=n.parseJSON(e);if(1!=e.code)return void warn(e.msg);t.res=e.result;var a=[];u.get(p)&&(a=u.get(p).split("&")),t.travelMajorList(a,t.res.undergraduateList),t.travelMajorList(a,t.res.juniorList),console.log(t.res),t.insertData(e.result)},error:function(t){console.log(t)}})},insertData:function(t){n("#caseFormWrapper").removeClass("preloading"),n("#majorSelectWrapper").empty().html(s(t)),this.bindEvt()},bindEvt:function(){var t=this;n(".label_check").on("click",function(t){t.stopPropagation(),r.setupLabel();n(t.target),n(this).closest("label")}),r.setupLabel(),n("#nBtn").on("click",function(e){e.preventDefault();var a=n(this).closest(".btn");a.hasClass("disabled")||(a.addClass("disabled"),t.submitFunc.call(t,a))})},submitFunc:function(t){var e=this,a=n("input[type=checkbox][name=majorType]"),r=[],s=!0;a.each(function(){n(this).prop("checked")&&(s=!1)}),r=n("input[type=checkbox][name=majorType]:checked");var i=e.selectList(r),o=n.map(i,function(t){return t.majorId}),l=o.length>0?o.join("&"):0;u.set(p,l);var c={majorList:i};console.log(c),n.ajax({url:preServer+d+"/tzy/plan/wishes/step3",type:"post",contentType:"application/json",data:JSON.stringify(c),success:function(e){if("string"==typeof e)var e=n.parseJSON(e);return 1==e.code?(window.location="/box/plan/book_step4",!1):(warn(e.msg),t.removeClass("disabled"),!1)},error:function(e){t.removeClass("disabled"),console.log(e)}})},selectList:function(t){return n.map(t,function(t,e){var a=n(t).siblings("[data-majorid]");return{majorId:a.data("majorid"),majorName:a.data("name")}})},subMajorModal:function(t){var e=this,a=t.data("suptype"),r=t.data("majorid"),s=n.grep(e.res.subs,function(t,e){return t.id==a?!0:void 0}),o=n.grep(s[0].subs,function(t,e){return t.id==r?!0:void 0}),l={name:t.data("name"),list:o[0].subs};modalBox(t,{html:i(l),klass:"w540 shadow",closeByOverlay:!0,completeCallback:function(){}})}});_.init()},145:function(t,e){},148:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj){if(undergraduateList.length>0){__p+='\n<div class="row">\n	<p class="g6 mb12">本科大类：</p>\n\n	';for(var i=0;i<undergraduateList.length;i++){__p+="\n		";var checkedStatus;checkedStatus=1==undergraduateList[i].status?"checked":"",__p+='\n	<label class="label_check" for="majorType'+(null==(__t=undergraduateList[i].categoryId)?"":__t)+'" >\n		<em class="icon-eye"  data-majorId='+(null==(__t=undergraduateList[i].categoryId)?"":__t)+' data-name="'+(null==(__t=undergraduateList[i].categoryName)?"":__t)+'"></em>\n		<input type="checkbox" class="input form-control" id="majorType'+(null==(__t=undergraduateList[i].categoryId)?"":__t)+'" name="majorType" '+(null==(__t=checkedStatus)?"":__t)+' required>\n		<em class="vm">'+(null==(__t=undergraduateList[i].categoryName)?"":__t)+'</em>\n		<em class="icon-yes">\n			<i></i>\n		</em>\n	</label>\n	'}__p+="\n</div>\n"}if(__p+="\n\n",juniorList.length>0){__p+='\n<div class="row">\n	<p class="g6 mb12">专科大类：</p>\n\n	';for(var i=0;i<juniorList.length;i++){__p+="\n		";var checkedStatus;checkedStatus=1==juniorList[i].status?"checked":"",__p+='\n	<label class="label_check" for="majorType'+(null==(__t=juniorList[i].categoryId)?"":__t)+'" >\n		<em class="icon-eye" data-majorId='+(null==(__t=juniorList[i].categoryId)?"":__t)+' data-name="'+(null==(__t=juniorList[i].categoryName)?"":__t)+'"></em>\n		<input type="checkbox" class="input form-control" id="majorType'+(null==(__t=juniorList[i].categoryId)?"":__t)+'" name="majorType" '+(null==(__t=checkedStatus)?"":__t)+' required>\n		<em class="vm">'+(null==(__t=juniorList[i].categoryName)?"":__t)+'</em>\n		<em class="icon-yes">\n			<i></i>\n		</em>\n	</label>\n	'}__p+="\n</div>\n"}}return __p}},149:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj){__p+='<div class="modalCntWrap taoModal g9 majorListModal">\n <h3 class="clearfix">\n <a href="javascript:;" class="icons btn-close fr"></a>\n <span class="fl"><em class="majorName">'+(null==(__t=name)?"":__t)+'</em>&nbsp;包含的专业</span>\n</h3>\n\n<div class="majorListWrap">\n  <div class="majorList">\n  	  ';for(var i=0;i<list.length;i++)__p+='\n      <span class="btn btn-default btn-list">'+(null==(__t=list[i].name)?"":__t)+"</span>\n      ";__p+="\n  </div>\n</div>\n\n</div>"}return __p}}});