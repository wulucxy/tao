webpackJsonp([8],{0:function(t,e,a){a(21),a(145);var n=window.$||a(44),r=a(45),s=(a(46),a(148)),o=a(149),i=a(135),l=a(136),c=a(53),u=a(107),d=n("[name=province]").val(),_=(n("[name=batch]").val(),n("[name=userId]").val()),p=c.isModernBrower,m={init:function(){this.detailTrigger(),this.requestData()},detailTrigger:function(){n("[data-trigger]").on("click",function(t){t.preventDefault();var e=n(t.target).closest(".trigger"),a="detail"==e.data("trigger")?i:l;modalBox(e.get(0),{html:a(),klass:"w540 shadow",closeByOverlay:!1,completeCallback:function(){}})})},travelMajorList:function(t,e){n.each(e,function(e,a){"-1"!=t.indexOf(a.categoryId)&&(a.status=1)})},requestData:function(){var t=this;n.ajax({url:preServer+d+"/data/major/categoryList",type:"get",success:function(e){if("string"==typeof rs)var e=n.parseJSON(e);if(1!=e.code)return void warn(e.msg);t.res=e.result;var a=[];u.get(_)&&(a=u.get(_).split("&")),t.travelMajorList(a,t.res.undergraduateList),t.travelMajorList(a,t.res.juniorList),console.log(t.res),t.insertData(e.result)},error:function(t){console.log(t)}})},insertData:function(t){n("#caseFormWrapper").removeClass("preloading"),n("#majorSelectWrapper").empty().html(s(t)),this.bindEvt()},bindEvt:function(){var t=this;n(".label_check").on("click",function(e){e.stopPropagation(),r.setupLabel();var a=n(e.target),s=n(this).closest("label");a.is(".icon-eye")?(e.preventDefault(),t.subMajorModal(a)):p||""!=s.attr("for")&&(n("#"+s.attr("for")).trigger("click"),r.setupLabel())}),r.setupLabel(),n("#nBtn").on("click",function(e){e.preventDefault();var a=n(this).closest(".btn");a.hasClass("disabled")||(a.addClass("disabled"),t.submitFunc.call(t,a))})},submitFunc:function(t){var e=this,a=n("input[type=checkbox][name=majorType]"),r=[],s=!0;a.each(function(){n(this).prop("checked")&&(s=!1)}),r=n("input[type=checkbox][name=majorType]:checked");var o=e.selectList(r),i=n.map(o,function(t){return t.majorId}),l=i.length>0?i.join("&"):0;u.set(_,l);var c={majorList:o};n.ajax({url:preServer+d+"/tzy/plan/wishes/step3",type:"post",contentType:"application/json",data:JSON.stringify(c),success:function(e){if("string"==typeof e)var e=n.parseJSON(e);return 1==e.code?(window.location="/box/plan/book_step4",!1):(warn(e.msg),t.removeClass("disabled"),!1)},error:function(e){t.removeClass("disabled"),console.log(e)}})},selectList:function(t){return n.map(t,function(t,e){var a=n(t).siblings("[data-majorid]");return{majorId:a.data("majorid"),majorName:a.data("name")}})},subMajorModal:function(t){var e=(t.data("suptype"),t.data("majorid"));n.ajax({url:preServer+d+"/data/major/category/"+e,type:"get",contentType:"application/json",success:function(e){if("string"==typeof e)var e=n.parseJSON(e);if(1!=e.code)return warn(e.msg),t.removeClass("disabled"),!1;var a={name:t.data("name"),list:e.result||[]};modalBox(t,{html:o(a),klass:"w540 shadow",closeByOverlay:!0,completeCallback:function(){}})},error:function(e){t.removeClass("disabled"),console.log(e)}})}};m.init()},145:function(t,e){},148:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){if(undergraduateList.length>0){__p+='\n<div class="row">\n\t<p class="g6 mb12">本科大类：</p>\n\n\t';for(var i=0;i<undergraduateList.length;i++){__p+="\n\t\t";var checkedStatus;checkedStatus=1==undergraduateList[i].status?"checked":"",__p+='\n\t<label class="label_check" for="majorType'+(null==(__t=undergraduateList[i].categoryId)?"":__t)+'" >\n\t\t<em class="icon-eye"  data-majorId='+(null==(__t=undergraduateList[i].categoryId)?"":__t)+' data-name="'+(null==(__t=undergraduateList[i].categoryName)?"":__t)+'"></em>\n\t\t<input type="checkbox" class="input form-control" id="majorType'+(null==(__t=undergraduateList[i].categoryId)?"":__t)+'" name="majorType" '+(null==(__t=checkedStatus)?"":__t)+' required>\n\t\t<em class="vm">'+(null==(__t=undergraduateList[i].categoryName)?"":__t)+'</em>\n\t\t<em class="icon-yes">\n\t\t\t<i></i>\n\t\t</em>\n\t</label>\n\t'}__p+="\n</div>\n"}if(__p+="\n\n",juniorList.length>0){__p+='\n<div class="row">\n\t<p class="g6 mb12">专科大类：</p>\n\n\t';for(var i=0;i<juniorList.length;i++){__p+="\n\t\t";var checkedStatus;checkedStatus=1==juniorList[i].status?"checked":"",__p+='\n\t<label class="label_check" for="majorType'+(null==(__t=juniorList[i].categoryId)?"":__t)+'" >\n\t\t<em class="icon-eye" data-majorId='+(null==(__t=juniorList[i].categoryId)?"":__t)+' data-name="'+(null==(__t=juniorList[i].categoryName)?"":__t)+'"></em>\n\t\t<input type="checkbox" class="input form-control" id="majorType'+(null==(__t=juniorList[i].categoryId)?"":__t)+'" name="majorType" '+(null==(__t=checkedStatus)?"":__t)+' required>\n\t\t<em class="vm">'+(null==(__t=juniorList[i].categoryName)?"":__t)+'</em>\n\t\t<em class="icon-yes">\n\t\t\t<i></i>\n\t\t</em>\n\t</label>\n\t'}__p+="\n</div>\n"}}return __p}},149:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){__p+='<div class="modalCntWrap taoModal g9 majorListModal">\n <h3 class="clearfix">\n <a href="javascript:;" class="icons btn-close fr"></a>\n <span class="fl"><em class="majorName">'+(null==(__t=name)?"":__t)+'</em>&nbsp;包含的专业</span>\n</h3>\n\n<div class="majorListWrap">\n  <div class="majorList">\n  \t  ';for(var i=0;i<list.length;i++)__p+='\n      <span class="btn btn-default btn-list">'+(null==(__t=list[i].majorName)?"":__t)+"</span>\n      ";__p+="\n  </div>\n</div>\n\n</div>"}return __p}}});