webpackJsonp([23],{0:function(e,t,a){a(21),a(213);var n=window.$||a(44);a(45),a(46);a(62);var o=a(184),i=(a(49),a(135),a(136),a(216),a(217),a(218)),l=(a(219),n("[name=province]").val()),s=(n("[name=courseType]").val(),n("[name=batch]").val(),a(190),a(139)),r=a(220),c=a(221),d=a(222);"function"!=typeof Array.prototype.every&&(Array.prototype.every=function(e,t){var a=!0;if("function"==typeof e)for(var n=0,o=this.length;n<o&&a!==!1;n++)a=!!e.call(t,this[n],n,this);return a}),"function"!=typeof Array.prototype.some&&(Array.prototype.some=function(e,t){var a=!1;if("function"==typeof e)for(var n=0,o=this.length;n<o&&a!==!0;n++)a=!!e.call(t,this[n],n,this);return a});var u=n(".wishInput").map(function(e,t){var a=n(t);return{collegeId:a.attr("collegeid"),collegeName:a.attr("collegename"),majorId:a.attr("majorid"),majorName:a.attr("majorname"),field:a.attr("field")}}).get(),h=n(".subjectInput").map(function(e,t){var a=n(t);return{name:a.attr("name"),code:a.val()}}).get(),p={init:function(e){this.pager=1,this.capacity=10,this.options=e,this.state={wishes:u||[],provList:[],cityList:[],current:{college:{},major:{}}},this.bindEvt(),this.render()},render:function(e){var t=this;t.options;if(n("#js-addSchool").toggleClass("disabled",!!t.state.current.college.code),n("#js-addMajor").toggleClass("disabled",!!t.state.current.major.code||!t.state.current.college.code),n("#js-addNext").toggleClass("disabled",!(t.state.current.college.code&&t.state.current.major.code)),t.state.wishes.length>=80&&n(".downRow").hide(),n("#divider").empty().html(d(t.state)),n(".panelWrap").empty().html(r(t.state)),t.state.provList.length)var a=n.map(t.state.provList,function(e){return'<li data-code="'+e.code+'">'+e.name+"</li>"});n(".prov").length&&!n(".prov").children().length&&(n(".prov").html(a),t.boxEvt(),t.options.startCallback&&t.options.startCallback.call(t)),n(".city").length&&(n(".city").html(c({majorList:t.state.cityList})),t.options.completeCallback&&t.options.completeCallback.call(t))},boxEvt:function(){var e=this,t=e.options;e.prov=n(".prov"),e.city=n(".city"),e.prov.on("click","li",function(){e.provIndex=e.prov.find("li").index(n(this)),n(this).siblings().removeClass(t.klass),n(this).addClass(t.klass),e.city.empty(),e.requestCityData.call(e,n(this).data("code"))}),n(document).off().on("click","[name=city]",function(t){var a=n(this);e.state.current.major.code=a.val(),e.state.current.major.name=a.attr("n");var o=e.state.current,i=e.state.wishes,l=!1;return n(i).each(function(e,t){if(t.majorId==o.major.code&&t.collegeId==o.college.code)return warn("不能选择重复的志愿方案"),l=!0,!1}),!l&&(e.state.wishes[0].majorId=a.val(),e.state.wishes[0].majorName=a.attr("n"),e.state.wishes[0].field=a.attr("field"),n(".btn-close").trigger("click"),void e.render())})},requestCityData:function(e){var t=this,a=(t.options,t.state.current.college.code,t.state.majorListAll.filter(function(t,a){return t.code==e}));t.state.cityList=a.length?a[0].majorList:[],t.render()},bindEvt:function(){this.addSchool(),this.addMajor(),this.removePanel(),this.addWishList(),this.submitForm()},submitForm:function(){var e=this;n("#verifyBtn").on("click",function(t){t.preventDefault();var a=e.state.wishes,o=a.some(function(e,t){return!(!e.collegeId||!e.majorId)}),i=!0;return n.each(a,function(e,t){if(t.collegeId&&t.collegeName&&(!t.majorId||!t.majorName))return i=!1,!1}),o?i?(console.log(e.state.wishes),void n.ajax({url:preServer+l+"/tzy/plan/assessment/step2",type:"post",contentType:"application/json",data:JSON.stringify({wishes:e.state.wishes}),success:function(e){if("string"==typeof e)var e=n.parseJSON(e);return 1==e.code?(window.location="/box/plan/evaluate_step3",!1):(warn(e.msg),!1)},error:function(e){console.log(e)}})):(warn("请确保每所学校至少选择一个专业"),!1):(warn("请至少选择一个志愿方案"),!1)})},resetWishes:function(){var e=this;e.state.current.college.name="",e.state.current.college.code="",e.state.current.major.code="",e.state.current.major.name=""},addWishList:function(){var e=this;n("body").on("click","#js-addNext",function(t){return t.preventDefault(),!n(t.target).hasClass("disabled")&&(e.resetWishes(),void e.render())})},removePanel:function(){var e=this;n("body").on("click",".panel-close",function(t){t.preventDefault();var a,o=n(t.target).closest(".panel"),i=o.attr("collegeid"),l=o.attr("majorid");n(e.state.wishes).each(function(e,t){if(i==t.collegeId&&l==t.majorId)return a=e,!1}),e.resetWishes(),e.state.wishes.splice(a,1),e.render()})},addSchool:function(){var e=(this.options,this);o.init({el:"#js-addSchool",provinceId:l,event:"click",url:"/v2_1/client/"+l+"/data/college/search",startCallback:function(e){},selectListCallback:function(t){var a=n(t);n(".btn-close").trigger("click"),e.state.current.college.name=a.attr("name"),e.state.current.college.code=a.attr("code"),e.state.wishes.unshift({collegeId:a.attr("code"),collegeName:a.attr("name")}),e.render()}})},requestMajors:function(e){var t=this,a=n(h).map(function(e,t){return Number(t.code)}).get();n.ajax({url:preServer+l+"/data/college/"+e.collegeId+"/category",type:"post",data:JSON.stringify({subjects:a}),success:function(a){if("string"==typeof a)var a=n.parseJSON(a);return 1!=a.code?void warn(a.msg):(t.majors=n.map(a.result,function(e){return{name:e.name,code:e.id}}),t.state.provList=t.majors,t.state.majorListAll=n.map(a.result,function(e){return{majorList:e.majorList,code:e.id}}),void(e.callback&&e.callback.call(t)))},error:function(e){console.log(e)}})},addMajor:function(){var e=this;n("#js-addMajor").on("click",function(t){function a(){modalBox(o,{html:i(),klass:"w540 shadow",closeByOverlay:!1,startCallback:function(t){e.modal=t,e.render()},completeCallback:function(){},closeCallback:function(){}})}t.preventDefault();var o=n(t.target).closest(".btn");if(!o.hasClass("disabled")){var l=e.state.current.college.code;e.requestMajors({collegeId:l,callback:a})}})}};p.init({klass:"current",startCallback:function(){s(n(".prov"),{height:n(".selectWrap").height(),alwaysVisible:!0}),n(".prov").find("li").eq(0).trigger("click")},completeCallback:function(){s(n(".city"),{height:n(".selectWrap").height(),alwaysVisible:!0})},schoolSelectedCallback:function(e){e.closest(".row")}})},139:function(e,t,a){function n(e,t){function a(e,t){this.target=e,this.options=t,this.init(t)}a.prototype={generateHTML:function(){var e=this,t=e.target,a=e.options;e.wrapper=o("<div>").addClass(a.wrapperClass).css({width:a.width,height:a.height}),t.css({overflow:"hidden",width:a.width,height:a.height}),e.rail=o("<div>").addClass(a.railClass).css({display:a.alwaysVisible&&a.railVisible?"block":"none"}),e.bar=o("<div>").addClass(a.barClass).css({display:a.alwaysVisible?"block":"none"});var n="right"==a.position?{right:a.distance}:{left:a.distance};e.rail.css(n),e.bar.css(n),t.wrap(e.wrapper),t.parent().append(e.bar),t.parent().append(e.rail)},getBarHeight:function(){var e=this,t=e.target,a=e.options,n=Math.max(t.outerHeight()/t[0].scrollHeight*t.outerHeight(),a.minBarHeight);e.bar.css({height:n+"px"});var o=n==t.outerHeight()?"none":"block",i=a.alwaysVisible&&a.railVisible?"block":o;e.rail.css({display:i}),e.bar.css({display:o})},checkPos:function(){var e=this,t=e.target,a=e.options;"bottom"===a.start?(e.bar.css({top:t.outerHeight()-e.bar.outerHeight()}),e.scrollContent(0,!0)):"top"!==a.start&&(e.scrollContent(o(a.start).position().top,!1,!0),a.alwaysVisible||e.bar.hide())},drag:function(){var e=this,t=(e.target,e.options);e.isDragg=!0,t.railDraggable&&e.bar.on("mousedown",function(t){var a=o(document),n=t.pageY-o(this).offset().top;return a.on("mousemove",function(t){e.bar.offset({top:t.pageY-n}),e.scrollContent(0,e.bar.position().top,!1)}),a.on("mouseup",function(t){e.isDragg=!1,a.off("mousemove"),a.off("mouseup")}),!1})},attachWheel:function(){var e=this,t=e.target;e.options;t.on("mousewheel",function(t,a){if(a>0){if(e.wrapper.data("anim"))return!1;e.wrapper.data("anim",!0),e.scrollContent(-1,!0)}else{if(e.wrapper.data("anim"))return!1;e.wrapper.data("anim",!0),e.scrollContent(1,!0)}return!1})},scrollContent:function(e,t,a){var n,o=this,i=o.target,l=o.options,s=e,r=i.parent().outerHeight()-o.bar.outerHeight();if(t&&(s=parseInt(o.bar.css("top"))+e*parseInt(l.wheelStep)/100*o.bar.outerHeight(),s=Math.min(Math.max(s,0),r),s=e>0?Math.ceil(s):Math.floor(s),o.bar.css({top:s+"px"}),o.wrapper.data("anim",!1)),n=parseInt(o.bar.css("top"))/i.outerHeight(),s=n*i[0].scrollHeight,a){s=e;var c=s/i[0].scrollHeight*i.outerHeight();o.bar.css({top:Math.min(Math.max(c,0),r)+"px"})}i.scrollTop(s)},init:function(e){var t=this,a=t.target;if(e.height="auto"==e.height?a.parent().innerHeight():e.height,a.parent().hasClass(e.wrapperClass)){var n=a.scrollTop();return t.bar=a.parent().find("."+e.barClass),t.rail=a.parent().find("."+e.railClass),t.getBarHeight(),void t.scrollContent(n,!1,!0)}t.generateHTML(),t.getBarHeight(),t.checkPos(),t.attachWheel(),t.drag()}};var n=i({width:"auto",height:"250px",position:"right",start:"top",distance:"1px",alwaysVisible:!1,disableFadeOut:!0,railVisible:!0,railDraggable:!0,railClass:"scrollBeautifyRail",barClass:"scrollBeautifyBar",wrapperClass:"scrollBeautifyDiv",wheelStep:20,minBarHeight:30},t),l=o(e).data("scroll");return o(e).each(function(e){var t=o(this);t.data("scroll",new a(t,n))}),l}a(140);var o=window.$||a(44),i=a(49);a(142),e.exports=n},140:function(e,t){},142:function(e,t,a){function n(e){var t=e||window.event,a=u.call(arguments,1),n=0,c=0,d=0,h=0,m=0,f=0;if(e=r.event.fix(t),e.type="mousewheel","detail"in t&&(d=t.detail*-1),"wheelDelta"in t&&(d=t.wheelDelta),"wheelDeltaY"in t&&(d=t.wheelDeltaY),"wheelDeltaX"in t&&(c=t.wheelDeltaX*-1),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(c=d*-1,d=0),n=0===d?c:d,"deltaY"in t&&(d=t.deltaY*-1,n=d),"deltaX"in t&&(c=t.deltaX,0===d&&(n=c*-1)),0!==d||0!==c){if(1===t.deltaMode){var v=r.data(this,"mousewheel-line-height");n*=v,d*=v,c*=v}else if(2===t.deltaMode){var g=r.data(this,"mousewheel-page-height");n*=g,d*=g,c*=g}if(h=Math.max(Math.abs(d),Math.abs(c)),(!s||h<s)&&(s=h,i(t,h)&&(s/=40)),i(t,h)&&(n/=40,c/=40,d/=40),n=Math[n>=1?"floor":"ceil"](n/s),c=Math[c>=1?"floor":"ceil"](c/s),d=Math[d>=1?"floor":"ceil"](d/s),p.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();m=e.clientX-_.left,f=e.clientY-_.top}return e.deltaX=c,e.deltaY=d,e.deltaFactor=s,e.offsetX=m,e.offsetY=f,e.deltaMode=0,a.unshift(e,n,c,d),l&&clearTimeout(l),l=setTimeout(o,200),(r.event.dispatch||r.event.handle).apply(this,a)}}function o(){s=null}function i(e,t){return p.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var l,s,r=window.$||a(44),c=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],d="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],u=Array.prototype.slice;if(r.event.fixHooks)for(var h=c.length;h;)r.event.fixHooks[c[--h]]=r.event.mouseHooks;var p=r.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=d.length;e;)this.addEventListener(d[--e],n,!1);else this.onmousewheel=n;r.data(this,"mousewheel-line-height",p.getLineHeight(this)),r.data(this,"mousewheel-page-height",p.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=d.length;e;)this.removeEventListener(d[--e],n,!1);else this.onmousewheel=null;r.removeData(this,"mousewheel-line-height"),r.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=r(e),a=t["offsetParent"in r.fn?"offsetParent":"parent"]();return a.length||(a=r("body")),parseInt(a.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return r(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};r.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}}),e.exports=p},213:function(e,t){},216:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="modalCntWrap g9 modalForm sSchoolModal">\n <h3 class="clearfix"><a href="javascript:;" class="icons btn-close fr"></a><span class="fl">选择大学</span></h3>\n <form class="modalSubCnt" id="sSchoolForm" onsubmit="return false;">\n  \n  <div class="s-Content">\n    <div class="input-group clearfix rel">\n      <span class="input-group-btn fr" id="searchBtn">\n        <button class="btn btn-default btn-search" type="button" id="sBtn">\n          <i class="iconList icon-search"></i>\n        </button>\n      </span>\n      <div class="inputWrap">\n         <input type="text" class="form-control fl" placeholder="请输入关键字搜索" id="wd">\n      </div>\n     \n    </div>\n\n    <ul class="schoolLists">\n     \n    </ul>\n\n</div>\n\n</form>\n</div>';return __p}},217:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)if(__p+=" ",0==colleges.length&&1==page)__p+='\n\t<li class="no_transList"><i class="noListIcon"></i><em class="vm">暂时搜索不到数据</em></li>\n';else{__p+="\n\t";for(var i=0;i<colleges.length;i++)__p+='\n\t \t<li class="schoolList" code="'+(null==(__t=colleges[i].collegeId)?"":__t)+'" name="'+(null==(__t=colleges[i].collegeName)?"":__t)+'"><em class="icon-check"></em><em class="vm">'+(null==(__t=colleges[i].collegeName)?"":__t)+"</em></li>\n "}return __p}},218:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="modalCntWrap g9 modalForm">\n <h3 class="clearfix"><a href="javascript:;" class="icons btn-close fr"></a><span class="fl">专业选择</span></h3>\n <form action="javascript:;" onsubmit="return false" autocomplete="off" id="majorForm" class="rel">\n            \n    <div class="selectContent s-major clearfix" id="majorContainer">\n      <div class="column col1 fl">\n        <h4>专业门类</h4>\n        <div class="selectWrap">\n          <ul class="prov">\n            \n          </ul>\n        </div>\n      </div>\n      <div class="column col2 fl">\n        <h4>专业</h4>\n        <div class="selectWrap">\n          <ul class="city">\n        </ul>\n        </div>\n      </div>\n      \n    </div>\n            \n    <div class="footerCnt tc">\n      <p id="errTxt" class="errTxt"></p>\n      <div class="row btnRow">\n            <button type="submit" class="btn btn-positive btn-form" id="majorBtn">\n                <em class="subTxt">保存</em>\n            </button>\n          </div>\n    </div>\n\n  </form>\n</div>';return __p}},219:function(e,t){e.exports=[{level:"1",code:3,name:"哲学"},{level:"1",code:4,name:"经济学"},{level:"1",code:5,name:"法学"},{level:"1",code:6,name:"教育学"},{level:"1",code:7,name:"文学"},{level:"1",code:8,name:"历史学"},{level:"1",code:9,name:"理学"},{level:"1",code:10,name:"工学"},{level:"1",code:11,name:"农学"},{level:"1",code:12,name:"医学"},{level:"1",code:13,name:"管理学"},{level:"2",code:14,name:"农林牧渔"},{level:"2",code:15,name:"交通运输"},{level:"2",code:16,name:"生化与药品"},{level:"2",code:17,name:"能源开发与测绘"},{level:"2",code:18,name:"材料与能源"},{level:"2",code:19,name:"土建"},{level:"2",code:20,name:"水利"},{level:"2",code:21,name:"制造"},{level:"2",code:22,name:"电子信息"},{level:"2",code:23,name:"环保、气象与安全"},{level:"2",code:24,name:"轻纺食品"},{level:"2",code:25,name:"财经"},{level:"2",code:26,name:"医药卫生"},{level:"2",code:27,name:"旅游"},{level:"2",code:28,name:"公共事业"},{level:"2",code:29,name:"文化教育"},{level:"2",code:30,name:"艺术设计传媒"},{level:"2",code:31,name:"公安"},{level:"2",code:32,name:"法律"}]},220:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)if(__p+=" ",0==wishes.length)__p+='\n\t<div class="no_wishList">\n\t\t请使用上方控件选择学校和专业，录入志愿信息\n\t</div>\n';else{__p+='\n<div class="panelLists clearfix">\n\t';for(var i=0;i<wishes.length;i++)__p+='\n\t\t<div class="panel" collegename="'+(null==(__t=wishes[i].collegeName)?"":__t)+'" collegeid="'+(null==(__t=wishes[i].collegeId)?"":__t)+'" majorname="'+(null==(__t=wishes[i].majorName)?"":__t)+'" majorid="'+(null==(__t=wishes[i].majorId)?"":__t)+'" >\n\t\t\t<div class="panel-hd">\n\t\t\t\t<i class="icon icon-close fr panel-close"></i>\n\t\t\t\t<div class="collegeName">'+(null==(__t=wishes[i].collegeName)?"":__t)+'</div>\n\t\t\t</div>\n\t\t\t<div class="panel-bd">\n\t\t\t\t'+(null==(__t=wishes[i].majorName)?"":__t),wishes[i].field&&(__p+="\n\t\t \t\t\t  ("+(null==(__t=wishes[i].field)?"":__t)+"方向)\n\t\t \t\t"),__p+="\n\t\t\t</div>\n\t\t</div>\n\t";__p+="\n</div>\n"}return __p}},221:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)if(__p+=" ",0==majorList.length)__p+="\n\t<li>暂无该专业数据</li>\n";else{__p+="\n\t";for(var i=0;i<majorList.length;i++)__p+='\n\t \t<li>\n\t\t \t<label for="major_'+(null==(__t=majorList[i].majorId)?"":__t)+'" >\n\t\t \t\t<input type="radio" name="city" n="'+(null==(__t=majorList[i].majorName)?"":__t)+'" value="'+(null==(__t=majorList[i].majorId)?"":__t)+'" id="major_'+(null==(__t=majorList[i].majorId)?"":__t)+'" field="'+(null==(__t=majorList[i].field)?"":__t)+'" />\n\t\t \t\t<em>'+(null==(__t=majorList[i].majorName)?"":__t)+"\n\t\t \t\t\t",majorList[i].field&&(__p+="\n\t\t \t\t\t  ("+(null==(__t=majorList[i].field)?"":__t)+"方向)\n\t\t \t\t\t"),__p+="\n\t\t \t\t</em>\n\t\t \t</label>\n\t\t</li>\n "}return __p}},222:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+=" ",__p+=0==wishes.length?'\n\t<span class="divider-content">已填志愿（ '+(null==(__t=wishes.length)?"":__t)+"/80）</span>\n":'\n\t<span class="divider-content">已填志愿（ '+(null==(__t=wishes.length)?"":__t)+"/80）</span>\n ";return __p}}});