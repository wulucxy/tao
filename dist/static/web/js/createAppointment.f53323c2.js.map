{"version":3,"sources":["webpack:///./src/pages/createAppointment/index.js","webpack:///./src/pages/createAppointment/index.less","webpack:///./src/assets/components/requestArea.js","webpack:///./src/assets/templates/pay.ejs","webpack:///./src/assets/components/pay.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,EAAC;;AAED;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,KAAI;AACJ;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;;;AAGA;;;;;;;;;;ACrGA,0C;;;;;;;ACAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAI;;AAEJ;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;;AAEA,8B;;;;;;;ACjCA;AACA,iBAAgB;AAChB;AACA,mBAAkB;AAClB;AACA,mHAAkH,uIAAuI;AACzP;AACA;AACA,iBAAgB,kBAAkB,OAAO;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA,E;;;;;;;ACrBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA,aAAY;AACZ,YAAW;AACX;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;;AAEA,WAAU;AACV;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;;AAGA,sB","file":"static/web/js/createAppointment.f53323c2.js","sourcesContent":["/* 建议这里都引入 */\nrequire('../../assets/less/common.less');\nrequire('./index.less');\nvar $ = window.$ || require(\"jquery\");\n\n//工具类方法\nvar util = require(\"../../assets/components/util\");\n\n//公共方法\nvar common = require(\"../../assets/components/common\");\n\n/* 具体实现 */\n// 验证组件\nrequire(\"../../assets/components/validator\");\nvar requestArea = require(\"../../assets/components/requestArea\");\nvar tmpl = require('../../assets/templates/pay.ejs');\n\n//pay\nvar pay = require(\"../../assets/components/pay\");\n\nvar province = $(\"[name=province]\").val();\n\n//checkbox定制\n$('.label_radio').click(function(){\n  util.setupLabel();\n});\n\nutil.setupLabel();\n\n\nvar educationPlan = {\n\t\n\tsubFunc: function(btn,oForm){\n\t\t\n\t\tvar data = {\n\t\t\tname : $(\"[name=name]\").val(),\n\t\t\tmobile : $(\"[name=mobile]\").val(),\n\t\t\tcity : $(\"[name=city]\").val(),\n\t\t\tappointmentType: $('[name=appointmentType]:checked').val()\n\t\t};\n\n\t\t$.ajax({\n\t\t\turl : preServer+province+\"/tzy/appointment/create\",\n\t\t\ttype : \"post\",\n\t\t\tcontentType: \"application/json\",\n\t\t\tdata : JSON.stringify(data),\n\t\t\tsuccess : function(res){\n\t\t\t\tif(typeof res == \"string\"){\n\t\t\t\t\tvar res = $.parseJSON(res);\n\t\t\t\t}\n\n\t\t\t\tif(res.code!=1){\n\t\t\t\t\twarn(res.msg);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twindow.location = \"/expertOrderSuccess\";\n\t\t\t\tbtn.removeClass('disabled')\n\t\t\t\treturn false;\n\n\t\t\t},\n\t\t\terror : function(){\n\t\t\t\tbtn.removeClass('disabled')\n\t\t\t\twarn(\"网络错误，请稍后再试\");\n\t\t\t}\n\t\t});\n\t},\n\n\tinit: function(){\n\t\tthis.bindEvt();\n\t},\n\n\tbindEvt: function(){\n\t\tvar that = this;\n\n\t\t// 表单校验\n\t\t$(\"#educationPlanForm\").validator({\n\t\t\terrorParent: '.row',\n\t\t    successCallback: function(e) {\n\t\t      var target = $(e.target).closest('.btn');\n\t\t      //执行到下一步操作\n\t\t      that.subFunc(target,$(\"#educationPlanForm\"));\n\n\t\t    },\n\t\t    focusinCallback: function() {\n\t\t      var _ele = $(this);\n\t\t      common.hideError($('.errTxt'));\n\t\t    },\n\n\t\t    errorCallback: function(unvalidFields) {\n\t\t      var oError = $('.errTxt');\n\t\t    }\n\t\t});\n\n\t\t// 请求地区\n\t\t//requestArea($('#city'));\n\t}\n\n};\n\n\neducationPlan.init();\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/pages/createAppointment/index.js\n ** module id = 0\n ** module chunks = 18\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/pages/createAppointment/index.less\n ** module id = 190\n ** module chunks = 18\n **/","var $ = window.$ || require(\"jquery\");\n\nvar requestArea =  function(ele){\n\t$.ajax({\n\t\turl : \"/system/area\",\n\t\ttype : \"get\",\n\t\tcontentType: \"application/json\",\n\t\tsuccess : function(res){\n\t\t\tif(typeof res == \"string\"){\n\t\t\t\tvar res = $.parseJSON(res);\n\t\t\t}\n\n\t\t\tif(res.code!=1){\n\t\t\t\twarn(res.msg);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar res = res.result;\n\t\t\tvar optionList = [];\n\n\t\t\t$.each(res,function(idx,ele){\n\t\t\t\toptionList.push('<option value='+ele.code+'>'+ele.name+'</option>');\n\t\t\t});\n\n\t\t\t$(ele).empty();\n\t\t\t$(ele).append(optionList.join(\"\"));\n\t\t},\n\t\terror : function(){\n\t\t\twarn(\"网络请求失败，请稍后重试\");\n\t\t}\n\t});\n}\n\nmodule.exports = requestArea;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/assets/components/requestArea.js\n ** module id = 193\n ** module chunks = 18\n **/","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"modalCntWrap taoModal g9 modalForm payModal\">\\n <h3 class=\"clearfix\">\\n  <a href=\"javascript:;\" class=\"icons btn-close fr\"></a>\\n  <span class=\"fl\">支付</span>\\n</h3>\\n <form class=\"modalSubCnt\" id=\"payForm\" onsubmit=\"return false;\">\\n\\n<div class=\"patWrap\">\\n  <div class=\"payContent tc\">\\n      <div class=\"f20 mb10\">\\n        <em class=\"vm\">支付金额：</em>\\n        <span class=\"orange f28 vm\">' +\n((__t = ( price )) == null ? '' : __t) +\n'元</span>\\n      </div>\\n\\n      <div class=\"row\">\\n        <label>\\n          <input type=\"radio\" name=\"channel\" value=\"alipay_pc_direct\" checked>\\n          <i class=\"payIcon zhifubao\"></i>\\n          <em>支付宝</em>\\n        </label>\\n      </div>\\n\\n      <div class=\"couponSelectWrap row\">\\n        <div class=\"selectWrap beautify-select\" id=\"couponSelect\">\\n         <div class=\"trigger usn\" data-toggle>\\n          <span class=\"triggerTxt\">使用优惠券</span>\\n          <em class=\"caret\"></em>\\n         </div>\\n         <ul class=\"options\" id=\"countryList\">\\n              ';\n for (var i = 0; i < items.length; i++) { ;\n__p += '\\n                <li code=\"' +\n((__t = ( items[i].coupinId )) == null ? '' : __t) +\n'\" name=\"' +\n((__t = ( items[i].title )) == null ? '' : __t) +\n'\">使用' +\n((__t = ( items[i].discount )) == null ? '' : __t) +\n'元优惠券</li>\\n              ';\n } ;\n__p += '\\n              <li id=\"\" name=\"\">不使用优惠券</li>\\n         </ul>\\n        </div>\\n      </div>\\n  </div>\\n\\n   <div class=\"footerCnt\">\\n       <p id=\"errTxt\" class=\"errTxt\"></p>\\n       <div class=\"row btnRow\">\\n         <button type=\"submit\" class=\"btn btn-primary btn-block\" id=\"payBtn\">\\n         \t\t<em class=\"subTxt\">确定支付</em></button>\\n       </div>\\n   </div>\\n </div>\\n\\n</form>\\n</div>';\n\n}\nreturn __p\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/assets/templates/pay.ejs\n ** module id = 194\n ** module chunks = 18 49\n **/","var $ = window.$ || require(\"jquery\");\nvar extend =  require('object-assign');\nvar ping = require('./ping');\n\nvar pay = {\n\tsubPay : function(btn, o){\n\t\tvar that = this;\n\n\t\tvar options=extend({\n\t\t\tchannel: 'alipay_pc_direct',\n\t\t\tprovinceId: '330000',\n\t\t\tplanId: '',\n\t\t\torderId: '',\n\t\t\ttype: 1,\n\t\t\tcouponCode: ''\n\t\t},o);\n\n\t\tthis.options = options;\n\n\t\tif(btn.hasClass(\"disabled\")) return;\n\t\tbtn.addClass(\"disabled\");\n\n\t\tvar _data = {\n\t\t\tchannel: options.channel,\n\t\t\tprovinceId: options.provinceId,\n\t\t\torderId: options.orderId,\n\t\t\ttype: options.type,\n\t\t\tcouponCode: options.couponCode\n\t\t};\n\n\t\t$.ajax({\n\t\t\turl : preServer + options.provinceId + \"/pay\",\n\t\t\ttype : \"post\",\n\t\t\tcontentType: \"application/json\",\n        \tdata : JSON.stringify(options),\n        \tsuccess : function(res){\n\n        \t\tif(typeof res == \"string\"){\n        \t\t\tvar res = $.parseJSON(res);\n        \t\t}\n\n        \t\tif(res.code !=1){\n        \t\t\tbtn.removeClass(\"disabled\");\n        \t\t\twarn(res.msg);\n        \t\t\treturn;\n        \t\t}else if(res.code ==1 && typeof res.result == 'undefined'){\n        \t\t\t// 此时不需要请求ping++\n        \t\t\twarn('支付成功', function(){\n        \t\t\t\twindow.location.href = '/user';\n        \t\t\t\treturn false;\n        \t\t\t});\n        \t\t}else{\n\t        \t\tvar charge = res.result;\n\t        \t\tif(/alipay/.test(options.channel)){\n\t        \t\t\tthat.requestAlipay(btn,charge);\n\t        \t\t}else{\n\t        \t\t\tthat.requestCoupon(btn,charge);\n\t        \t\t}\n\t        \t}\n\n        \t},\n        \terror : function(err){\n        \t\tbtn.removeClass(\"disabled\");\n        \t\tconsole.log(err);\n        \t}\n\t\t});\n\t},\n\n\trequestAlipay : function(btn,charge){\n\t\tvar that = this;\n\t\tping.createPayment(charge, function(result, err){\n\t\t\tif(err){\n\t\t\t\twarn(err.msg);\n\t\t\t\tbtn.removeClass(\"disabled\");\n\t\t\t}else{\n\t\t\t\tconsole.log(result);\n\t\t\t\twindow.location.href = '/user';\n\t\t\t}\n\t\t});\n\t},\n\n\trequestCoupon : function(btn,res){\n\t\tvar that = this;\n\t\twarn(\"恭喜您已成功下单，稍后跳转结果页\",function(){\n\t\t\twindow.location = \"/box/plan/result?planId=\"+that.options.planId;\n\t\t\tbtn.removeClass(\"disabled\");\n\t\t});\n\t}\n}\n\n\nmodule.exports = pay;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/assets/components/pay.js\n ** module id = 195\n ** module chunks = 18 49\n **/"],"sourceRoot":""}