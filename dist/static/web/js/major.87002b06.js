webpackJsonp([35],{0:function(t,a,e){e(23),e(278);var s=(window.$||e(46),e(47),e(48));s.switchNav(2);var n=e(280);n.init()},278:function(t,a){},280:function(t,a,e){var s=window.$||e(46),n=(e(51),e(281)),r=e(282),i=e(47),o=s("[name=province]").val(),l={render:function(){var t=this;if(this.state.tagList.length){var a=s.map(t.state.tagList,function(t){var a=t.type+":"+t.value;return'<a class="tags" data-action="remove" href="javascript:;" data-value="'+a+'">'+t.text+'<span class="taoIcon btn-x"></span></a>'}),e=[];e.push('<a href="javascript:;" class="fr btn btn-default" data-action="clear">清空所有</a>'),e.push('<span class="cat-text fl">已选择：</span>'),e.push(a.join("")),s(".crumb").html(e.join(""))}else s(".crumb").html('<span class="cat-text fl">已选择：</span>');if(!s("input[name=city]").length){var n=[];n.push('<input type="hidden" name="bachelor">'),n.push('<input type="hidden" name="junior">'),s(".crumb").append(n.join(""))}var r="";s.each(t.state.tagList,function(t,a){s("[name="+a.type+"]").val(a.value||""),r+=s("[name="+a.type+"]").val()})},requestData:function(t){var a=this,e=(a.options,t.data("value").split(":")[1]);({Undergraduate:s("[name=bachelor]").val(),speciality:s("[name=junior]").val()});s.ajax({url:preServer+o+"/data/major/category/"+e,type:"get",contentType:"application/json",success:function(t){if("string"==typeof t)var t=s.parseJSON(t);return 1!=t.code?void warn(t.msg):(t.majors=t.result,void a.loadList(t))}})},loadList:function(t){var a=this,e=(a.options,n(t));s(".majorList").empty().html(e)},loadListAll:function(t){var a=this,e=(a.options,r(t));s(".majorList").empty().html(e)},updateUI:function(){this.render()},init:function(t){this.state={tagList:[]},this.options=t,this.majorDataCache,this.bindEvt(),i.getQuery("keyword")?this.searchMajorReq(s("#sBtn"),decodeURI(i.getQuery("keyword"))):this.requestAll()},requestAll:function(t){var a=this;return"undefined"!=typeof a.majorDataCache?("undefined"!=typeof t&&(a.majorDataCache.majors=a.majorDataCache[t]),void a.loadListAll(a.majorDataCache)):void s.ajax({url:preServer+o+"/data/major/all",type:"get",contentType:"application/json",success:function(t){if("string"==typeof t)var t=s.parseJSON(t);if(1!=t.code)return void warn(t.msg);t=t.result;var e=s.map(t.subs,function(t,a){return t.subs}),n=t.subs[0].subs,r=t.subs[1].subs;t.majors=e,t[1]=n,t[2]=r,a.majorDataCache=t,a.loadListAll(t)}})},searchMajorReq:function(t,a){var e=this,n=s("#majorInput");s.ajax({url:preServer+o+"/data/major/search",type:"post",data:JSON.stringify({keyword:a||n.val()}),contentType:"application/json",success:function(a){if("string"==typeof a)var a=s.parseJSON(a);return 1!=a.code?(warn(a.msg),void t.removeClass("disabled")):(a.majors=a.result,t.removeClass("disabled"),void e.loadList(a))},error:function(a){console.log(a),t.removeClass("disabled")}})},bindEvt:function(){var t=this;s(document).on("click","[data-action=add]",function(a){a.preventDefault(),s("#majorInput").val("");var e=s(a.target),n=e.data("value").split(":")[0],r=e.data("value").split(":")[1];if(!e.hasClass("current")){s("[data-action=add]").removeClass("current"),s.each(t.state.tagList,function(a,e){if(n==e.type)return t.state.tagList.splice(a,1),!1}),e.addClass("current"),t.state.tagList=[],t.state.tagList.push({type:n,value:r,text:e.text()});var i;""==r||"0"==r?("undergraduate"==n&&""==r?i=1:"undergraduate"==n&&"0"==r?i=2:"speciality"==n&&""==r?i=2:"speciality"==n&&"0"==r&&(i=1),t.requestAll(i)):t.requestData(e),t.updateUI()}}),s(document).on("click","[data-action=clear]",function(a){a.preventDefault(),s("#majorInput").val(""),s("[data-action=add]").removeClass("current"),t.state.tagList=[],t.updateUI(),t.requestAll()}),s(document).on("click","[data-action=remove]",function(a){a.preventDefault(),s("#majorInput").val("");var e=s(a.target).closest(".tags"),n=e.data("value").split(":")[0],r=e.data("value").split(":")[1];s.each(t.state.tagList,function(a,e){if(n==e.type&&r==e.value){t.state.tagList.splice(a,1);var i='[data-value="'+n+":"+r+'"]';return s(i).removeClass("current"),!1}}),t.updateUI(),t.requestAll()}),s("#sBtn").on("click",function(a){a.preventDefault();var e=s("#majorInput"),n=s(this).closest(".btn");return""==s.trim(e.val())?void warn("请输入专业名称"):void(n.hasClass("disabled")||(n.addClass("disabled"),t.searchMajorReq(n)))})}};t.exports=l},281:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)if(0==majors.length)__p+='\n\t<li class="no_transList"><i class="noListIcon"></i><em class="vm">暂无记录</em></li>\n';else{__p+="\t\n";for(var i=0;i<majors.length;i++)__p+='\n<li class="clearfix subMajorList">\n\t<div class="majorBtnRow">\n\t\t<a target="_blank" href="/library/major/'+(null==(__t=majors[i].majorId)?"":__t)+'" data-id="'+(null==(__t=majors[i].majorId)?"":__t)+'" class="btn btn-primary btn-mid">'+(null==(__t=majors[i].majorName)?"":__t)+"</a>\n\t</div>\n</li>\n"}return __p}},282:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)if(0==majors.length)__p+='\n\t<li class="no_transList"><i class="noListIcon"></i><em class="vm">暂无记录</em></li>\n';else{__p+="\t\n";for(var i=0;i<majors.length;i++){__p+='\n<li class="clearfix">\n\t<div class="bg bg-f1">'+(null==(__t=majors[i].name)?"":__t)+"："+(null==(__t=majors[i].subs.length)?"":__t)+'个</div>\n\t<div class="majorBtnRow">\n\t\t';for(var j=0;j<majors[i].subs.length;j++)__p+='\n\t\t<a target="_blank" href="/library/major/'+(null==(__t=majors[i].subs[j].id)?"":__t)+'" data-id="'+(null==(__t=majors[i].subs[j].id)?"":__t)+'" class="btn btn-primary btn-mid">'+(null==(__t=majors[i].subs[j].name)?"":__t)+"</a>\n\t\t";__p+="\n\t</div>\n</li>\n"}}return __p}}});