webpackJsonp([44],{0:function(a,e,n){n(23),n(310);var t=window.$||n(46),r=n(47),o=(n(48),n(129)),s=n(206),i=t("[name=province]").val(),c=t("[name=planId]").val(),l={init:function(){this.detailTrigger(),this.bindEvt()},transformData:function(){var a={majorList:t.parseJSON(t("[name=majorListJson]").text()),c:t.parseJSON(t("[name=cJson]").text()),batch:t("[name=batch]").text(),courseType:t("[name=courseType]").text(),score:t("[name=score]").text(),place:t("[name=place]").text(),provinceName:t("[name=provinceName]").val(),userName:t("[name=userName]").val()};return a},detailTrigger:function(){var a=this,e=a.transformData();t("[data-trigger]").on("click",function(a){a.preventDefault();var n=t(a.target).closest(".trigger");modalBox(n.get(0),{html:o(e),klass:"w540 shadow",closeByOverlay:!1,startCallback:function(){r.setupLabel()},completeCallback:function(){}})})},bindEvt:function(){var a=this;t("#verifyBtn").on("click",function(e){e.preventDefault();var n=t(this),r=t("[name=channel]:checked").val();return"coupon"!=r||""!=t.trim(t("#card").val())&&t("#card").val()!=t("#card").attr("placeholder")?void a.subPay(n):void warn("请输入正确的支付卡号")})},subPay:function(a){var e=this;if(!a.hasClass("disabled")){a.addClass("disabled");var n={orderId:t("[name=orderId]").val(),channel:t("[name=channel]:checked").val()};/alipay/.test(n.channel)||t("#card").val()==t("#card").attr("placeholder")||(n.couponCode=t("#card").val()),t.ajax({url:preServer+i+"/pay",type:"post",contentType:"application/json",data:JSON.stringify(n),success:function(r){if("string"==typeof r)var r=t.parseJSON(r);if(1!=r.code)return a.removeClass("disabled"),void warn(r.msg);var o=r.result;/alipay/.test(n.channel)?e.requestAlipay(a,o):e.requestCoupon(a,o)},error:function(e){a.removeClass("disabled"),console.log(e)}})}},requestAlipay:function(a,e){s.createPayment(e,function(e,n){n&&(warn(n.msg),a.removeClass("disabled"))})},requestCoupon:function(a,e){warn("恭喜您已成功下单，稍后跳转结果页",function(){window.location="/box/plan/result?planId="+c,a.removeClass("disabled")})}};l.init()},310:function(a,e){}});