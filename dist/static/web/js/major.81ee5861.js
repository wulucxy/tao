webpackJsonp([33],{0:function(a,t,e){e(19),e(260);var s=(window.$||e(41),e(42),e(43));s.switchNav(2);var n=e(262);n.init()},260:function(a,t){},262:function(a,t,e){var s=window.$||e(41),n=(e(46),e(263)),r=e(264),i=e(42),o=s("[name=province]").val(),l={render:function(){var a=this;if(this.state.tagList.length){var t=s.map(a.state.tagList,function(a){var t=a.type+":"+a.value;return'<a class="tags" data-action="remove" href="javascript:;" data-value="'+t+'">'+a.text+'<span class="taoIcon btn-x"></span></a>'}),e=[];e.push('<a href="javascript:;" class="fr btn btn-default" data-action="clear">清空所有</a>'),e.push('<span class="cat-text fl">已选择：</span>'),e.push(t.join("")),s(".crumb").html(e.join(""))}else s(".crumb").html('<span class="cat-text fl">已选择：</span>');if(!s("input[name=city]").length){var n=[];n.push('<input type="hidden" name="bachelor">'),n.push('<input type="hidden" name="junior">'),s(".crumb").append(n.join(""))}var r="";s.each(a.state.tagList,function(a,t){s("[name="+t.type+"]").val(t.value||""),r+=s("[name="+t.type+"]").val()})},requestData:function(a){var t=this,e=(t.options,a.data("value").split(":")[1]);({Undergraduate:s("[name=bachelor]").val(),speciality:s("[name=junior]").val()});s.ajax({url:preServer+o+"/data/major/category/"+e,type:"get",contentType:"application/json",success:function(a){if("string"==typeof a)var a=s.parseJSON(a);return 1!=a.code?void warn(a.msg):(a.majors=a.result,void t.loadList(a))}})},loadList:function(a){var t=this,e=(t.options,n(a));s(".majorList").empty().html(e)},loadListAll:function(a){var t=this,e=(t.options,r(a));s(".majorList").empty().html(e)},updateUI:function(){this.render()},init:function(a){this.state={tagList:[]},this.options=a,this.majorDataCache,this.bindEvt(),i.getQuery("keyword")?this.searchMajorReq(s("#sBtn"),decodeURI(i.getQuery("keyword"))):this.requestAll()},requestAll:function(a){var t=this;return"undefined"!=typeof t.majorDataCache?("undefined"!=typeof a&&(t.majorDataCache.majors=t.majorDataCache[a]),void t.loadListAll(t.majorDataCache)):void s.ajax({url:preServer+o+"/data/major/all",type:"get",contentType:"application/json",success:function(a){if("string"==typeof a)var a=s.parseJSON(a);if(1!=a.code)return void warn(a.msg);a=a.result;var e=s.map(a.subs,function(a,t){return a.subs}),n=a.subs[0].subs,r=a.subs[1].subs;a.majors=e,a[1]=n,a[2]=r,t.majorDataCache=a,t.loadListAll(a)}})},searchMajorReq:function(a,t){var e=this,n=s("#majorInput");s.ajax({url:preServer+o+"/data/major/search",type:"post",data:JSON.stringify({keyword:t||n.val()}),contentType:"application/json",success:function(t){if("string"==typeof t)var t=s.parseJSON(t);return 1!=t.code?(warn(t.msg),void a.removeClass("disabled")):(t.majors=t.result,a.removeClass("disabled"),void e.loadList(t))},error:function(t){console.log(t),a.removeClass("disabled")}})},bindEvt:function(){var a=this;s(document).on("click","[data-action=add]",function(t){t.preventDefault(),s("#majorInput").val("");var e=s(t.target),n=e.data("value").split(":")[0],r=e.data("value").split(":")[1];if(!e.hasClass("current")){s("[data-action=add]").removeClass("current"),s.each(a.state.tagList,function(t,e){return n==e.type?(a.state.tagList.splice(t,1),!1):void 0}),e.addClass("current"),a.state.tagList=[],a.state.tagList.push({type:n,value:r,text:e.text()});var i;""==r||"0"==r?("undergraduate"==n&&""==r?i=1:"undergraduate"==n&&"0"==r?i=2:"speciality"==n&&""==r?i=2:"speciality"==n&&"0"==r&&(i=1),a.requestAll(i)):a.requestData(e),a.updateUI()}}),s(document).on("click","[data-action=clear]",function(t){t.preventDefault(),s("#majorInput").val(""),s("[data-action=add]").removeClass("current"),a.state.tagList=[],a.updateUI(),a.requestAll()}),s(document).on("click","[data-action=remove]",function(t){t.preventDefault(),s("#majorInput").val("");var e=s(t.target).closest(".tags"),n=e.data("value").split(":")[0],r=e.data("value").split(":")[1];s.each(a.state.tagList,function(t,e){if(n==e.type&&r==e.value){a.state.tagList.splice(t,1);var i='[data-value="'+n+":"+r+'"]';return s(i).removeClass("current"),!1}}),a.updateUI(),a.requestAll()}),s("#sBtn").on("click",function(t){t.preventDefault();var e=s("#majorInput"),n=s(this).closest(".btn");return""==s.trim(e.val())?void warn("请输入专业名称"):void(n.hasClass("disabled")||(n.addClass("disabled"),a.searchMajorReq(n)))})}};a.exports=l},263:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)if(0==majors.length)__p+='\n	<li class="no_transList"><i class="noListIcon"></i><em class="vm">暂无记录</em></li>\n';else{__p+="	\n";for(var i=0;i<majors.length;i++)__p+='\n<li class="clearfix subMajorList">\n	<div class="majorBtnRow">\n		<a target="_blank" href="/library/major/'+(null==(__t=majors[i].majorId)?"":__t)+'" data-id="'+(null==(__t=majors[i].majorId)?"":__t)+'" class="btn btn-primary btn-mid">'+(null==(__t=majors[i].majorName)?"":__t)+"</a>\n	</div>\n</li>\n"}return __p}},264:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)if(0==majors.length)__p+='\n	<li class="no_transList"><i class="noListIcon"></i><em class="vm">暂无记录</em></li>\n';else{__p+="	\n";for(var i=0;i<majors.length;i++){__p+='\n<li class="clearfix">\n	<div class="bg bg-f1">'+(null==(__t=majors[i].name)?"":__t)+"："+(null==(__t=majors[i].subs.length)?"":__t)+'个</div>\n	<div class="majorBtnRow">\n		';for(var j=0;j<majors[i].subs.length;j++)__p+='\n		<a target="_blank" href="/library/major/'+(null==(__t=majors[i].subs[j].id)?"":__t)+'" data-id="'+(null==(__t=majors[i].subs[j].id)?"":__t)+'" class="btn btn-primary btn-mid">'+(null==(__t=majors[i].subs[j].name)?"":__t)+"</a>\n		";__p+="\n	</div>\n</li>\n"}}return __p}}});