webpackJsonp([23],{0:function(e,t,n){n(21),n(215);var a=window.$||n(44);n(45),n(46);n(62);var o=n(186),i=(n(49),n(145),n(146),n(218),n(219),n(220)),l=(n(221),a("[name=province]").val()),s=(a("[name=courseType]").val(),a("[name=batch]").val(),n(192),n(149)),r=n(222),c=n(223),d=n(224);"function"!=typeof Array.prototype.every&&(Array.prototype.every=function(e,t){var n=!0;if("function"==typeof e)for(var a=0,o=this.length;a<o&&n!==!1;a++)n=!!e.call(t,this[a],a,this);return n}),"function"!=typeof Array.prototype.some&&(Array.prototype.some=function(e,t){var n=!1;if("function"==typeof e)for(var a=0,o=this.length;a<o&&n!==!0;a++)n=!!e.call(t,this[a],a,this);return n});var u=a(".wishInput").map(function(e,t){var n=a(t);return{collegeId:n.attr("collegeid"),collegeName:n.attr("collegename"),majorId:n.attr("majorid"),majorName:n.attr("majorname"),field:n.attr("field")}}).get(),h=a(".subjectInput").map(function(e,t){var n=a(t);return{name:n.attr("name"),code:n.val()}}).get(),p={init:function(e){this.pager=1,this.capacity=10,this.options=e,this.state={wishes:u||[],provList:[],cityList:[],current:{college:{},major:{}}},this.bindEvt(),this.render()},uuid:function(){return Math.random().toString(36).substring(3,8)},render:function(e){var t=this;t.options;if(a("#js-addSchool").toggleClass("disabled",!!t.state.current.college.code),a("#js-addMajor").toggleClass("disabled",!!t.state.current.major.code||!t.state.current.college.code),a("#js-addNext").toggleClass("disabled",!(t.state.current.college.code&&t.state.current.major.code)),t.state.wishes.length>=80&&a(".downRow").hide(),a("#divider").empty().html(d(t.state)),a(".panelWrap").empty().html(r(t.state)),t.state.provList.length)var n=a.map(t.state.provList,function(e){return'<li data-code="'+e.code+'">'+e.name+"</li>"});a(".prov").length&&!a(".prov").children().length&&(a(".prov").html(n),t.boxEvt(),t.options.startCallback&&t.options.startCallback.call(t)),a(".city").length&&(a(".city").html(c({majorList:t.state.cityList})),t.options.completeCallback&&t.options.completeCallback.call(t))},boxEvt:function(){var e=this,t=e.options;e.prov=a(".prov"),e.city=a(".city"),e.prov.on("click","li",function(){e.provIndex=e.prov.find("li").index(a(this)),a(this).siblings().removeClass(t.klass),a(this).addClass(t.klass),e.city.empty(),e.requestCityData.call(e,a(this).data("code"))}),a(document).off().on("click","[name=city]",function(t){var n=a(this);e.state.current.major.code=n.val(),e.state.current.major.name=n.attr("n"),e.state.current.major.field=n.attr("field");var o=e.state.current,i=e.state.wishes,l=!1;return a(i).each(function(e,t){if(t.majorId==o.major.code&&t.collegeId==o.college.code&&t.field==o.major.field)return warn("不能选择重复的志愿方案"),l=!0,!1}),!l&&(e.state.wishes[0].majorId=n.val(),e.state.wishes[0].majorName=n.attr("n"),e.state.wishes[0].field=n.attr("field"),a(".btn-close").trigger("click"),void e.render())})},requestCityData:function(e){var t=this,n=(t.options,t.state.current.college.code,t.state.majorListAll.filter(function(t,n){return t.code==e}));t.state.cityList=n.length?n[0].majorList:[],t.render()},bindEvt:function(){this.addSchool(),this.addMajor(),this.removePanel(),this.addWishList(),this.submitForm()},submitForm:function(){var e=this;a("#verifyBtn").on("click",function(t){t.preventDefault();var n=e.state.wishes,o=n.some(function(e,t){return!(!e.collegeId||!e.majorId)}),i=!0;return a.each(n,function(e,t){if(t.collegeId&&t.collegeName&&(!t.majorId||!t.majorName))return i=!1,!1}),o?i?void a.ajax({url:preServer+l+"/tzy/plan/assessment/step2",type:"post",contentType:"application/json",data:JSON.stringify({wishes:e.state.wishes}),success:function(e){if("string"==typeof e)var e=a.parseJSON(e);return 1==e.code?(window.location="/box/plan/evaluate_step3",!1):(warn(e.msg),!1)},error:function(e){console.log(e)}}):(warn("请确保每所学校至少选择一个专业"),!1):(warn("请至少选择一个志愿方案"),!1)})},resetWishes:function(){var e=this;e.state.current.college.name="",e.state.current.college.code="",e.state.current.major.code="",e.state.current.major.name=""},addWishList:function(){var e=this;a("body").on("click","#js-addNext",function(t){return t.preventDefault(),!a(t.target).hasClass("disabled")&&(e.resetWishes(),void e.render())})},removePanel:function(){var e=this;a("body").on("click",".panel-close",function(t){t.preventDefault();var n,o=a(t.target).closest(".panel"),i=o.attr("collegeid"),l=o.attr("majorid");a(e.state.wishes).each(function(e,t){if(i==t.collegeId&&l==t.majorId)return n=e,!1}),e.resetWishes(),e.state.wishes.splice(n,1),e.render()})},addSchool:function(){var e=(this.options,this);a("#js-addSchool").on("dblclick",function(e){e.preventDefault()}),o.init({el:"#js-addSchool",provinceId:l,event:"click",url:"/v2_1/client/"+l+"/data/college/search",startCallback:function(e){},selectListCallback:function(t){var n=a(t);a(".btn-close").trigger("click"),e.state.current.college.name=n.attr("name"),e.state.current.college.code=n.attr("code"),e.state.wishes.unshift({collegeId:n.attr("code"),collegeName:n.attr("name")}),e.render()}})},requestMajors:function(e){var t=this,n=a(h).map(function(e,t){return Number(t.code)}).get();a.ajax({url:preServer+l+"/data/college/"+e.collegeId+"/category",type:"post",data:JSON.stringify({subjects:n}),success:function(n){if("string"==typeof n)var n=a.parseJSON(n);return 1!=n.code?void warn(n.msg):0==n.result.length?void warn("该学校没有符合条件的专业可选"):(t.majors=a.map(n.result,function(e){return{name:e.name,code:e.id}}),t.state.provList=t.majors,a.each(n.result,function(e,n){a.each(n.majorList,function(e,n){n.majorUuid=n.majorId+t.uuid()})}),t.state.majorListAll=a.map(n.result,function(e){return{majorList:e.majorList,code:e.id}}),void(e.callback&&e.callback.call(t)))},error:function(e){console.log(e)}})},addMajor:function(){var e=this;a("#js-addMajor").on("click",function(t){function n(){modalBox(o,{html:i(),klass:"w540 shadow",closeByOverlay:!1,startCallback:function(t){e.modal=t,e.render()},completeCallback:function(){},closeCallback:function(){}})}t.preventDefault();var o=a(t.target).closest(".btn");if(!o.hasClass("disabled")){var l=e.state.current.college.code;e.requestMajors({collegeId:l,callback:n})}})}};p.init({klass:"current",startCallback:function(){s(a(".prov"),{height:a(".selectWrap").height(),alwaysVisible:!0}),a(".prov").find("li").eq(0).trigger("click")},completeCallback:function(){s(a(".city"),{height:a(".selectWrap").height(),alwaysVisible:!0})},schoolSelectedCallback:function(e){e.closest(".row")}})},149:function(e,t,n){function a(e,t){function n(e,t){this.target=e,this.options=t,this.init(t)}n.prototype={generateHTML:function(){var e=this,t=e.target,n=e.options;e.wrapper=o("<div>").addClass(n.wrapperClass).css({width:n.width,height:n.height}),t.css({overflow:"hidden",width:n.width,height:n.height}),e.rail=o("<div>").addClass(n.railClass).css({display:n.alwaysVisible&&n.railVisible?"block":"none"}),e.bar=o("<div>").addClass(n.barClass).css({display:n.alwaysVisible?"block":"none"});var a="right"==n.position?{right:n.distance}:{left:n.distance};e.rail.css(a),e.bar.css(a),t.wrap(e.wrapper),t.parent().append(e.bar),t.parent().append(e.rail)},getBarHeight:function(){var e=this,t=e.target,n=e.options,a=Math.max(t.outerHeight()/t[0].scrollHeight*t.outerHeight(),n.minBarHeight);e.bar.css({height:a+"px"});var o=a==t.outerHeight()?"none":"block",i=n.alwaysVisible&&n.railVisible?"block":o;e.rail.css({display:i}),e.bar.css({display:o})},checkPos:function(){var e=this,t=e.target,n=e.options;"bottom"===n.start?(e.bar.css({top:t.outerHeight()-e.bar.outerHeight()}),e.scrollContent(0,!0)):"top"!==n.start&&(e.scrollContent(o(n.start).position().top,!1,!0),n.alwaysVisible||e.bar.hide())},drag:function(){var e=this,t=(e.target,e.options);e.isDragg=!0,t.railDraggable&&e.bar.on("mousedown",function(t){var n=o(document),a=t.pageY-o(this).offset().top;return n.on("mousemove",function(t){e.bar.offset({top:t.pageY-a}),e.scrollContent(0,e.bar.position().top,!1)}),n.on("mouseup",function(t){e.isDragg=!1,n.off("mousemove"),n.off("mouseup")}),!1})},attachWheel:function(){var e=this,t=e.target;e.options;t.on("mousewheel",function(t,n){if(n>0){if(e.wrapper.data("anim"))return!1;e.wrapper.data("anim",!0),e.scrollContent(-1,!0)}else{if(e.wrapper.data("anim"))return!1;e.wrapper.data("anim",!0),e.scrollContent(1,!0)}return!1})},scrollContent:function(e,t,n){var a,o=this,i=o.target,l=o.options,s=e,r=i.parent().outerHeight()-o.bar.outerHeight();if(t&&(s=parseInt(o.bar.css("top"))+e*parseInt(l.wheelStep)/100*o.bar.outerHeight(),s=Math.min(Math.max(s,0),r),s=e>0?Math.ceil(s):Math.floor(s),o.bar.css({top:s+"px"}),o.wrapper.data("anim",!1)),a=parseInt(o.bar.css("top"))/i.outerHeight(),s=a*i[0].scrollHeight,n){s=e;var c=s/i[0].scrollHeight*i.outerHeight();o.bar.css({top:Math.min(Math.max(c,0),r)+"px"})}i.scrollTop(s)},init:function(e){var t=this,n=t.target;if(e.height="auto"==e.height?n.parent().innerHeight():e.height,n.parent().hasClass(e.wrapperClass)){var a=n.scrollTop();return t.bar=n.parent().find("."+e.barClass),t.rail=n.parent().find("."+e.railClass),t.getBarHeight(),void t.scrollContent(a,!1,!0)}t.generateHTML(),t.getBarHeight(),t.checkPos(),t.attachWheel(),t.drag()}};var a=i({width:"auto",height:"250px",position:"right",start:"top",distance:"1px",alwaysVisible:!1,disableFadeOut:!0,railVisible:!0,railDraggable:!0,railClass:"scrollBeautifyRail",barClass:"scrollBeautifyBar",wrapperClass:"scrollBeautifyDiv",wheelStep:20,minBarHeight:30},t),l=o(e).data("scroll");return o(e).each(function(e){var t=o(this);t.data("scroll",new n(t,a))}),l}n(150);var o=window.$||n(44),i=n(49);n(152),e.exports=a},150:function(e,t){},152:function(e,t,n){function a(e){var t=e||window.event,n=u.call(arguments,1),a=0,c=0,d=0,h=0,m=0,f=0;if(e=r.event.fix(t),e.type="mousewheel","detail"in t&&(d=t.detail*-1),"wheelDelta"in t&&(d=t.wheelDelta),"wheelDeltaY"in t&&(d=t.wheelDeltaY),"wheelDeltaX"in t&&(c=t.wheelDeltaX*-1),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(c=d*-1,d=0),a=0===d?c:d,"deltaY"in t&&(d=t.deltaY*-1,a=d),"deltaX"in t&&(c=t.deltaX,0===d&&(a=c*-1)),0!==d||0!==c){if(1===t.deltaMode){var v=r.data(this,"mousewheel-line-height");a*=v,d*=v,c*=v}else if(2===t.deltaMode){var g=r.data(this,"mousewheel-page-height");a*=g,d*=g,c*=g}if(h=Math.max(Math.abs(d),Math.abs(c)),(!s||h<s)&&(s=h,i(t,h)&&(s/=40)),i(t,h)&&(a/=40,c/=40,d/=40),a=Math[a>=1?"floor":"ceil"](a/s),c=Math[c>=1?"floor":"ceil"](c/s),d=Math[d>=1?"floor":"ceil"](d/s),p.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();m=e.clientX-_.left,f=e.clientY-_.top}return e.deltaX=c,e.deltaY=d,e.deltaFactor=s,e.offsetX=m,e.offsetY=f,e.deltaMode=0,n.unshift(e,a,c,d),l&&clearTimeout(l),l=setTimeout(o,200),(r.event.dispatch||r.event.handle).apply(this,n)}}function o(){s=null}function i(e,t){return p.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var l,s,r=window.$||n(44),c=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],d="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],u=Array.prototype.slice;if(r.event.fixHooks)for(var h=c.length;h;)r.event.fixHooks[c[--h]]=r.event.mouseHooks;var p=r.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=d.length;e;)this.addEventListener(d[--e],a,!1);else this.onmousewheel=a;r.data(this,"mousewheel-line-height",p.getLineHeight(this)),r.data(this,"mousewheel-page-height",p.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=d.length;e;)this.removeEventListener(d[--e],a,!1);else this.onmousewheel=null;r.removeData(this,"mousewheel-line-height"),r.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=r(e),n=t["offsetParent"in r.fn?"offsetParent":"parent"]();return n.length||(n=r("body")),parseInt(n.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return r(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};r.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}}),e.exports=p},215:function(e,t){},218:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="modalCntWrap g9 modalForm sSchoolModal">\n <h3 class="clearfix"><a href="javascript:;" class="icons btn-close fr"></a><span class="fl">选择大学</span></h3>\n <form class="modalSubCnt" id="sSchoolForm" onsubmit="return false;">\n  \n  <div class="s-Content">\n    <div class="input-group clearfix rel">\n      <span class="input-group-btn fr" id="searchBtn">\n        <button class="btn btn-default btn-search" type="button" id="sBtn">\n          <i class="iconList icon-search"></i>\n        </button>\n      </span>\n      <div class="inputWrap">\n         <input type="text" class="form-control fl" placeholder="请输入关键字搜索" id="wd">\n      </div>\n     \n    </div>\n\n    <ul class="schoolLists">\n     \n    </ul>\n\n</div>\n\n</form>\n</div>';return __p}},219:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)if(__p+=" ",0==colleges.length&&1==page)__p+='\n\t<li class="no_transList"><i class="noListIcon"></i><em class="vm">暂时搜索不到数据</em></li>\n';else{__p+="\n\t";for(var i=0;i<colleges.length;i++)__p+='\n\t \t<li class="schoolList" code="'+(null==(__t=colleges[i].collegeId)?"":__t)+'" name="'+(null==(__t=colleges[i].collegeName)?"":__t)+'"><em class="icon-check"></em><em class="vm">'+(null==(__t=colleges[i].collegeName)?"":__t)+"</em></li>\n "}return __p}},220:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="modalCntWrap g9 modalForm">\n <h3 class="clearfix"><a href="javascript:;" class="icons btn-close fr"></a><span class="fl">专业选择</span></h3>\n <form action="javascript:;" onsubmit="return false" autocomplete="off" id="majorForm" class="rel">\n            \n    <div class="selectContent s-major clearfix" id="majorContainer">\n      <div class="column col1 fl">\n        <h4>专业门类</h4>\n        <div class="selectWrap">\n          <ul class="prov">\n            \n          </ul>\n        </div>\n      </div>\n      <div class="column col2 fl">\n        <h4>专业</h4>\n        <div class="selectWrap">\n          <ul class="city">\n        </ul>\n        </div>\n      </div>\n      \n    </div>\n            \n    <!-- <div class="footerCnt tc">\n      <p id="errTxt" class="errTxt"></p>\n      <div class="row btnRow">\n            <button type="submit" class="btn btn-positive btn-form" id="majorBtn">\n                <em class="subTxt">保存</em>\n            </button>\n          </div>\n    </div> -->\n\n  </form>\n</div>';return __p}},221:function(e,t){e.exports=[{level:"1",code:3,name:"哲学"},{level:"1",code:4,name:"经济学"},{level:"1",code:5,name:"法学"},{level:"1",code:6,name:"教育学"},{level:"1",code:7,name:"文学"},{level:"1",code:8,name:"历史学"},{level:"1",code:9,name:"理学"},{level:"1",code:10,name:"工学"},{level:"1",code:11,name:"农学"},{level:"1",code:12,name:"医学"},{level:"1",code:13,name:"管理学"},{level:"2",code:14,name:"农林牧渔"},{level:"2",code:15,name:"交通运输"},{level:"2",code:16,name:"生化与药品"},{level:"2",code:17,name:"能源开发与测绘"},{level:"2",code:18,name:"材料与能源"},{level:"2",code:19,name:"土建"},{level:"2",code:20,name:"水利"},{level:"2",code:21,name:"制造"},{level:"2",code:22,name:"电子信息"},{level:"2",code:23,name:"环保、气象与安全"},{level:"2",code:24,name:"轻纺食品"},{level:"2",code:25,name:"财经"},{level:"2",code:26,name:"医药卫生"},{level:"2",code:27,name:"旅游"},{level:"2",code:28,name:"公共事业"},{level:"2",code:29,name:"文化教育"},{level:"2",code:30,name:"艺术设计传媒"},{level:"2",code:31,name:"公安"},{level:"2",code:32,name:"法律"}]},222:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)if(__p+=" ",0==wishes.length)__p+='\n\t<div class="no_wishList">\n\t\t请使用上方控件选择学校和专业，录入志愿信息\n\t</div>\n';else{__p+='\n<div class="panelLists clearfix">\n\t';for(var i=0;i<wishes.length;i++)__p+='\n\t\t<div class="panel" collegename="'+(null==(__t=wishes[i].collegeName)?"":__t)+'" collegeid="'+(null==(__t=wishes[i].collegeId)?"":__t)+'" majorname="'+(null==(__t=wishes[i].majorName)?"":__t)+'" majorid="'+(null==(__t=wishes[i].majorId)?"":__t)+'" >\n\t\t\t<div class="panel-hd">\n\t\t\t\t<i class="icon icon-close fr panel-close"></i>\n\t\t\t\t<div class="collegeName">'+(null==(__t=wishes[i].collegeName)?"":__t)+'</div>\n\t\t\t</div>\n\t\t\t<div class="panel-bd">\n\t\t\t\t'+(null==(__t=wishes[i].majorName)?"":__t),wishes[i].field&&(__p+="\n\t\t \t\t\t  ("+(null==(__t=wishes[i].field)?"":__t)+"方向)\n\t\t \t\t"),__p+="\n\t\t\t</div>\n\t\t</div>\n\t";__p+="\n</div>\n"}return __p}},223:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)if(__p+=" ",0==majorList.length)__p+="\n\t<li>暂无该专业数据</li>\n";else{__p+="\n\t";for(var i=0;i<majorList.length;i++)__p+='\n\t \t<li>\n\t\t \t<label for="major_'+(null==(__t=majorList[i].majorUuid)?"":__t)+'" >\n\t\t \t\t<input type="radio" name="city" n="'+(null==(__t=majorList[i].majorName)?"":__t)+'" value="'+(null==(__t=majorList[i].majorId)?"":__t)+'" id="major_'+(null==(__t=majorList[i].majorUuid)?"":__t)+'" field="'+(null==(__t=majorList[i].field)?"":__t)+'" />\n\t\t \t\t<em>'+(null==(__t=majorList[i].majorName)?"":__t)+"\n\t\t \t\t\t",majorList[i].field&&(__p+="\n\t\t \t\t\t  ("+(null==(__t=majorList[i].field)?"":__t)+"方向)\n\t\t \t\t\t"),__p+="\n\t\t \t\t</em>\n\t\t \t</label>\n\t\t</li>\n "}return __p}},224:function(module,exports){module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+=" ",__p+=0==wishes.length?'\n\t<span class="divider-content">已填志愿（ '+(null==(__t=wishes.length)?"":__t)+"/80）</span>\n":'\n\t<span class="divider-content">已填志愿（ '+(null==(__t=wishes.length)?"":__t)+"/80）</span>\n ";return __p}}});