{"version":3,"sources":["webpack:///./src/pages/scoreLineResult/index.js","webpack:///./src/assets/components/searchSchool/index.js?596a","webpack:///./src/assets/components/searchSchool/index.less?a76f","webpack:///./src/assets/components/searchSchool/templates/searchSchool.ejs?79c9","webpack:///./src/assets/components/searchSchool/templates/schoolList.ejs?a1e1","webpack:///./src/assets/components/searchSchool/templates/highschool.ejs?8082","webpack:///./src/pages/scoreLineResult/index.less"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA,MAAK,KAAK;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;;AAEN;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAG;;AAEH;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,M;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,IAAG;AACH,G;AACA;;;AAGA;;;;;;;;;;ACzKA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,WAAU;AACV;AACA,8B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAY;;AAEZ,WAAU;AACV;AACA;AACA;AACA,SAAQ;;AAER,OAAM;AACN,GAAE;AACF;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,+BAA8B,gEAAgE;AAC9F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAM;AACN,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,O;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAM;AACN;;AAEA;;AAEA,+B;;;;;;;ACvJA,0C;;;;;;;ACAA;AACA,iBAAgB;AAChB;AACA;AACA,0GAAyG,uIAAuI;;AAEhP;AACA;AACA,E;;;;;;;ACRA;AACA,iBAAgB;AAChB;AACA,mBAAkB;AAClB;AACA;AACA,0CAAyC;AACzC;AACA,GAAE,KAAK;AACP;AACA,iBAAgB,qBAAqB,OAAO;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA,E;;;;;;;ACvBA;AACA,iBAAgB;AAChB;AACA,mBAAkB;AAClB;AACA;AACA,yCAAwC;AACxC;AACA,GAAE,KAAK;AACP;AACA,iBAAgB,oBAAoB,OAAO;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA,E;;;;;;;ACvBA,0C","file":"static/web/js/scoreLineResult.js","sourcesContent":["/* 建议这里都引入 */\nrequire('../../assets/less/common.less');\nrequire('./index.less');\nvar $ = window.$ || require(\"jquery\");\n\n//工具类方法\nvar util = require(\"../../assets/components/util\");\n\n//公共方法\nvar common = require(\"../../assets/components/common\");\n\nvar searchSchool = require(\"../../assets/components/searchSchool\");\n\nrequire(\"../../assets/components/validator\");\n\n//checkbox定制\n$('.label_radio').click(function(){\n  util.setupLabel();\n});\n\nutil.setupLabel();\n\n//切换顶部nav高亮\ncommon.switchNav(2);\n\nvar provinceId = $(\"[name=province]\").val();\n\nvar score = {\n\n\tinit : function(){\n\t\tsearchSchool.init({\n\t\t\tel : \".addSchool\",\n\t\t\tprovinceId : provinceId,\n\t\t\tselectListCallback : function(li){\n\t\t\t\tvar self = this;\n\n\t\t\t\t//如果选择的是对比类型\n\t\t\t\tif(self.trigger.hasClass(\"sub\")){\n\t\t\t\t\tif(li.attr(\"code\") == $(\"[name=primaryCode]\").val()){\n\t\t\t\t\t\twarn(\"请选择不同的学校进行对比\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}else if(li.attr(\"name\") == $(\".sub\").not(self.trigger).val()){\n\t\t\t\t\t\twarn(\"请选择不同的学校进行对比\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}else{\t//如果选择的是主类型\n\t\t\t\t\tvar pName = li.attr(\"name\"),\n\t\t\t\t\t\tpSame;\n\t\t\t\t\t$.each($(\".sub\"),function(idx,ele){\n\t\t\t\t\t\tif(pName == ele.value){\n\t\t\t\t\t\t\twarn(\"请选择不同的学校进行对比\");\n\t\t\t\t\t\t\tpSame = true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif(!!pSame) return false;\n\t\t\t\t}\n\n\t\t\t\t$(\".btn-close\").trigger(\"click\");\n\n\t\t\t\tself.trigger.val(li.attr(\"name\"));\n\t\t\t\tself.trigger.closest(\".row\").find(\".hiddenCode\").val(li.attr(\"code\"));\n\n\t\t\t\tself.trigger.closest(\".row\").removeClass(\"errorIpt empty unvalid\");\n\n\t\t\t\tvar subCode = self.trigger.closest(\".row\").find(\".subCode\");\n\t\t\t\tif(subCode.length){\n\t\t\t\t\tsubCode.val(li.attr(\"code\"));\n\t\t\t\t\tsubCode.prop(\"checked\",true);\n\t\t\t\t}\n\n\t\t\t\t//需要增加不能同时选择同所学校的判断\n\t\t\t\t\n\t\t\t}\n\t\t});\n\n\t\tthis.bindEvt();\n\t},\n\n\tbindEvt : function(){\n\t\tvar that = this;\n\n\t\t$(\"#scorelineForm\").validator({\n\t\t\terrorParent: '.row',\n\t\t    successCallback: function(e) {\n\t\t      var target = $(e.target).closest('.btn');\n\t\t      //执行到下一步操作\n\t\t      if(that.checkStatus()){\n\t\t      \tthat.subFunc(target,$(\"#scorelineForm\"));\n\t\t      }\n\n\t\t    },\n\t\t    focusinCallback: function() {\n\t\t      var _ele = $(this);\n\t\t      common.hideError($('.errTxt'));\n\t\t    },\n\n\t\t    errorCallback: function(unvalidFields) {\n\t\t      var oError = $('.errTxt');\n\t\t      that.unvalidFieldsCallback(unvalidFields);\n\t\t    }\n\t\t});\n\t},\n\n\tcheckStatus : function(){\n\t\tvar that = this;\n\n\t\tif(!$(\"[name=contrast]\").eq(0).val() && !$(\"[name=contrast]\").eq(1).val()) return false;\n\n\t\tif($(\"[name=contrast]\").eq(0).val() == $(\"[name=contrast]\").eq(1).val()){\n\t\t\t$(\"[name=contrast]\").eq(0).closest(\".row\").addClass(\"errorIpt unvalid\");\n\t\t\treturn false;\n\t\t}else{\n\t\t\tvar passed = true;\n\t\t\t$(\"[name=contrast]\").each(function(idx,ele){\n\t\t\t\tif($(ele).val() == $(\"[name=primarySub]\").val()){\n\t\t\t\t\t$(ele).closest(\".row\").addClass(\"errorIpt unvalid\");\n\t\t\t\t\tpassed = false;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn passed;\n\t\t}\n\t\treturn true;\n\t},\n\t\n\tunvalidFieldsCallback : function(unvalidFields){\n\t\t$.each(unvalidFields,function(idx,ele){\n\t\t\t$(ele).closest(\".row\").addClass(\"errorIpt\");\n\t\t});\n\t},\n\n\tsubFunc : function(btn,oForm){\n\t\tvar that = this;\n\n\t\tvar parm = [];\n\t\tparm.push(\"courseType=\"+$(\"[name=courseType]:checked\").val());\n\t\tparm.push(\"batch=\"+$(\"[name=batch]:checked\").val());\n\t\tparm.push(\"primary=\"+$(\"[name=primaryCode]\").val());\n\t\tparm.push(\"second=\"+$(\"[name=secondCode]\").val());\n\t\tparm.push(\"third=\"+$(\"[name=thirdCode]\").val());\n\n\n\t\t$.ajax({\n\t\t\turl : preServer+provinceId+\"/data/college/threshold/compare?\"+parm.join(\"&\"),\n\t\t\ttype : \"get\",\n\t\t\tsuccess : function(res){\n\t\t\t\tif(typeof res == \"string\"){\n\t\t\t\t\tvar res = $.parseJSON(res);\n\t\t\t\t}\n\n\t\t\t\tif(res.code!=1){\n\t\t\t\t\t warn(res.msg);\n\t\t\t\t\t return;\n\t\t\t\t}\t\n\n\t\t\t\t//分数线对比结果页\n\t\t\t\twindow.location = \"/\";\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror : function(err){\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\t});\n\t}\t\n};\n\n\nscore.init();\n\n\n \n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/pages/scoreLineResult/index.js\n ** module id = 0\n ** module chunks = 35\n **/","var $ = window.$ || require(\"jquery\");\nvar extend =  require('object-assign');\n\nrequire(\"./index.less\");\n//自定义功能写下面\nvar tmpl_school = require(\"./templates/searchSchool.ejs\");\nvar tmpl_list = require(\"./templates/schoolList.ejs\");\nvar tmpl_highschool = require(\"./templates/highschool.ejs\");\n//分页\nvar pagination = require(\"../pagination\");\n\nvar searchSchool = {\n\n\tinit : function(options){\n\t\tthis.pager = 1;\n\t\tthis.options = extend({\n\t\t\tel : \".addSchool\",\n\t\t\tprovinceId : 330000,\n\t\t\ttype  : \"college\",\n\t\t\tcapacity : 10\n\t\t},options);\n\n\t\tthis.bindEvt();\n\t},\n\n\tbindEvt : function(){\n\t\tvar that = this,o = that.options;\n\t\t\n\t\t$(o.el).on(\"focusin\",function(e){\n\t      e.preventDefault();\n\t      var oInput = $(e.target);\n\t      if(oInput.hasClass(\"cur\")) return;\n\t      oInput.addClass(\"cur\");\n\n\t      that.trigger = oInput;\n\n\t      modalBox(oInput,{\n\t        html : tmpl_school(),\n\t        klass : 'w540 shadow',\n\t        closeByOverlay : false,\n\t        startCallback : function(modal){\n\t          //指向\n\t          that.modal = modal;\n\t          that.modal.ref = this;\n\n\t          modal.majorType = oInput.attr(\"major\");\n\t          that.requestData(that.pager);\n\t          \n\t          o.startCallback && o.startCallback.call(that,modal);\n\t        },\n\t        completeCallback : function(){\n\t          var self = oInput; \n\t          var oInput = $(\"#wd\");\n\t          $(\"#sBtn\").on(\"click\",function(e){\n\t            e.preventDefault();\n\t            if($.trim(oInput.val()) == \"\"){\n\t              warn(\"请输入搜索关键词\");\n\t              return false;\n\t            }\n\n\t            that.requestData(that.pager);\n\t          });\n\t          \n\t        },\n\t        closeCallback : function(){\n\t          oInput.removeClass(\"cur\");\n\t        }\n\t      });\n\n\t    });\n\t},\n\trequestData : function(pager){\n\t    var that = this;\n\t    var o = that.options;\n\n\t    var url = o.url || preServer+o.provinceId+\"/data/college/search\";\n\n\t    $.ajax({\n\t      url : url,\n      \t  type : \"post\",\n\t      contentType: \"application/json\",\n\t      data : JSON.stringify({page:pager,capacity:o.capacity,\"keyword\":$.trim($(\"#wd\").val())}),\n\t      success : function(res){\n\t        if(typeof res == \"string\"){\n\t          var res = $.parseJSON(res);\n\t        }\n\n\t        if(res.code!=1){\n\t\t\t\twarn(res.msg);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tres = res.result;\n\n\t        that.renderList(res);\n\t        that.detailpagination(res);\n\t        that.Evt();\n\t      }\n\t    });\n\t},\n\n    renderList : function(res){\n      var that = this;\n      var o = that.options;\n      var modal = that.modal;\n\n      \tvar _tmpl;\n        if(o.type==\"highSchool\"){\n\t       _tmpl = tmpl_highschool(res)\n\t    }else{\n\t    \t_tmpl = tmpl_list(res)\n\t    }\n\n      $('.schoolLists').empty().append(_tmpl).hide().fadeIn();\n    },\n\n   detailpagination : function(res){\n     var that = this;\n     var o = that.options;\n     var modal = that.modal;\n     if(!modal.find('.pagination').length){\n       modal.find('.s-Content').append('<div class=\"pagination\"></div>');\n     } \n\n    var $page = modal.find(\".pagination\");\n\t  pagination($page,{\n\t    pages: Math.ceil(res.total / o.capacity),\n\t    displayedPages: 3,\n\t    currentPage : 1,\n\t    edges: 1,\n\t    onPageClick : function(pageNo){\n\t      that.requestData(pageNo);\n\t    }\n\t  });\n\n    },\n\n\tEvt : function(){\n\t    var that = this,o = that.options;\n\t    $(document).off().on(\"click\",\".schoolList\",function(e){\n\t      e.preventDefault();\n\t      var $this = $(this);\n\t      $this.siblings().removeClass(\"active\");\n\t      $this.addClass(\"active\");\n\n\t  \t  o.selectListCallback && o.selectListCallback.call(that,$this);\n\t    });\n\t}\n\n};\n\nmodule.exports = searchSchool;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/assets/components/searchSchool/index.js\n ** module id = 373\n ** module chunks = 34 35 38\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/assets/components/searchSchool/index.less\n ** module id = 374\n ** module chunks = 34 35 38\n **/","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"modalCntWrap g9 modalForm sSchoolModal\">\\n <h3 class=\"clearfix\"><a href=\"javascript:;\" class=\"icons btn-close fr\"></a><span class=\"fl\">选择大学</span></h3>\\n <form class=\"modalSubCnt\" id=\"sSchoolForm\" onsubmit=\"return false;\">\\n  \\n  <div class=\"s-Content\">\\n    <div class=\"input-group clearfix rel\">\\n      <span class=\"input-group-btn fr\" id=\"searchBtn\">\\n        <button class=\"btn btn-default btn-search\" type=\"button\" id=\"sBtn\">\\n          <i class=\"iconList icon-search\"></i>\\n        </button>\\n      </span>\\n      <div class=\"inputWrap\">\\n         <input type=\"text\" class=\"form-control fl\" placeholder=\"请输入关键字搜索\" id=\"wd\">\\n      </div>\\n     \\n    </div>\\n\\n    <ul class=\"schoolLists\">\\n     \\n    </ul>\\n\\n</div>\\n\\n</form>\\n</div>';\n\n}\nreturn __p\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/assets/components/searchSchool/templates/searchSchool.ejs\n ** module id = 376\n ** module chunks = 34 35 38\n **/","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += ' ';\n if (colleges.length == 0 && page == 1) { ;\n__p += '\\n\t<li class=\"no_transList\"><i class=\"noListIcon\"></i><em class=\"vm\">暂时搜索不到数据</em></li>\\n';\n }else{ ;\n__p += '\\n\t';\n for (var i = 0; i < colleges.length; i++) { ;\n__p += '\\n\t \t<li class=\"schoolList\" code=\"' +\n((__t = ( colleges[i].collegeId )) == null ? '' : __t) +\n'\" name=\"' +\n((__t = ( colleges[i].collegeName )) == null ? '' : __t) +\n'\"><em class=\"icon-check\"></em><em class=\"vm\">' +\n((__t = ( colleges[i].collegeName )) == null ? '' : __t) +\n'</em></li>\\n ';\n }} ;\n\n\n}\nreturn __p\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/assets/components/searchSchool/templates/schoolList.ejs\n ** module id = 377\n ** module chunks = 34 35 38\n **/","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += ' ';\n if (schools.length == 0 && page == 1) { ;\n__p += '\\n\t<li class=\"no_transList\"><i class=\"noListIcon\"></i><em class=\"vm\">暂时搜索不到数据</em></li>\\n';\n }else{ ;\n__p += '\\n\t';\n for (var i = 0; i < schools.length; i++) { ;\n__p += '\\n\t \t<li class=\"schoolList\" code=\"' +\n((__t = ( schools[i].code )) == null ? '' : __t) +\n'\" name=\"' +\n((__t = ( schools[i].name )) == null ? '' : __t) +\n'\"><em class=\"icon-check\"></em><em class=\"vm\">' +\n((__t = ( schools[i].name )) == null ? '' : __t) +\n'</em></li>\\n ';\n }} ;\n\n\n}\nreturn __p\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/assets/components/searchSchool/templates/highschool.ejs\n ** module id = 378\n ** module chunks = 34 35 38\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/pages/scoreLineResult/index.less\n ** module id = 379\n ** module chunks = 35\n **/"],"sourceRoot":""}